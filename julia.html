<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>London — Map-First Trip Planner</title>
  <style>
    :root{
      --bg:#0b0f17; --card:rgba(255,255,255,.04); --line:rgba(255,255,255,.12);
      --text:#e9eefc; --muted:#a9b4d0; --shadow:0 16px 40px rgba(0,0,0,.45);
      --accent:rgba(110,168,255,.28); --radius:18px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color:var(--text);
      background:
        radial-gradient(1200px 800px at 20% 10%, rgba(110,168,255,.14), transparent 55%),
        radial-gradient(1000px 800px at 90% 20%, rgba(255,140,84,.10), transparent 55%),
        var(--bg);
    }
    .wrap{max-width:1250px;margin:0 auto;padding:22px 16px 60px}
    h1{margin:0;font-size:28px}
    .sub{margin-top:6px;color:var(--muted);line-height:1.35;max-width:980px}

    .panel{
      margin-top:14px;
      border:1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.03));
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding:14px;
    }

    .layout{
      margin-top:14px;
      display:grid;
      grid-template-columns: 290px 1fr 420px;
      gap:12px;
      align-items:start;
    }
    @media (max-width: 1100px){
      .layout{grid-template-columns: 1fr}
    }

    .card{
      border:1px solid var(--line);
      background: rgba(0,0,0,.20);
      border-radius: var(--radius);
      overflow:hidden;
      box-shadow: var(--shadow);
    }
    .cardHeader{
      padding:12px 12px;
      border-bottom:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
      display:flex; justify-content:space-between; align-items:center; gap:10px;
      font-weight:700;
    }
    .cardBody{padding:12px}
    .list{max-height:70vh; overflow:auto}
    .neigh{
      padding:10px 12px;
      border-bottom:1px solid rgba(255,255,255,.06);
      cursor:pointer;
      display:flex; flex-direction:column; gap:4px;
    }
    .neigh:hover{background: rgba(255,255,255,.03)}
    .neigh.active{background: rgba(110,168,255,.14)}
    .neigh small{color:var(--muted)}

    .btn{
      display:inline-flex; align-items:center; justify-content:center; gap:8px;
      padding:9px 12px; border-radius:12px;
      border:1px solid var(--line); background: rgba(255,255,255,.07);
      color:var(--text); font-size:12px; cursor:pointer; white-space:nowrap;
      text-decoration:none;
    }
    .btn.primary{background: var(--accent); border-color: rgba(110,168,255,.35)}
    .btn:active{transform: translateY(1px)}
    .btnRow{display:flex; gap:8px; flex-wrap:wrap}

    .chips{display:flex;gap:8px;flex-wrap:wrap}
    .chip{
      font-size:12px;
      padding:8px 10px;
      border-radius:999px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.03);
      color:var(--text);
      cursor:pointer;
      user-select:none;
    }
    .chip:hover{background: rgba(255,255,255,.06)}
    .chip.active{background: rgba(110,168,255,.20); border-color: rgba(110,168,255,.35)}
    .muted{color:var(--muted);font-size:12px;line-height:1.35}
    iframe{width:100%;height:520px;border:0;display:block;background:#000}
    .gridLinks{
      display:grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap:10px;
      margin-top:12px;
    }
    .linkTile{
      border:1px solid var(--line);
      background: rgba(255,255,255,.03);
      border-radius: 14px;
      padding:12px;
      display:flex; flex-direction:column; gap:8px;
      min-height: 92px;
    }
    .linkTile strong{font-size:13px}
    .linkTile .q{font-size:11px;color:var(--muted);line-height:1.25}
  </style>
</head>

<body>
  <div class="wrap">
    <h1>London — Map-First Trip Planner</h1>
    <div class="sub">
      Pick a neighborhood, then tap a category (Lunch, Pilates, Coffee, Museums, etc.).
      The map updates instantly and each category opens Google Maps already filtered.
      Use <b>“100+ more”</b> for a huge list of extra ideas.
    </div>

    <div class="panel">
      <div class="btnRow">
        <button class="btn primary" id="moreBtn">100+ more near here</button>
        <a class="btn" id="openMapsBtn" href="#" target="_blank" rel="noopener">Open this search in Maps</a>
        <button class="btn" id="resetBtn">Reset</button>
      </div>
      <div class="muted" style="margin-top:10px" id="status"></div>
    </div>

    <div class="layout">
      <!-- Neighborhoods -->
      <div class="card">
        <div class="cardHeader">
          <span>Neighborhoods</span>
          <span id="neighCount" class="muted"></span>
        </div>
        <div class="list" id="neighList"></div>
      </div>

      <!-- Categories + curated shortcuts -->
      <div class="card">
        <div class="cardHeader">
          <span id="midTitle">Choose a neighborhood</span>
          <span class="muted" id="midMeta"></span>
        </div>
        <div class="cardBody">
          <div class="muted" style="margin-bottom:10px">
            Tap a category to update the map. These are search queries — so you’ll get a constantly fresh list.
          </div>
          <div class="chips" id="chips"></div>

          <div class="gridLinks" id="quickLinks"></div>
        </div>
      </div>

      <!-- Live Map -->
      <div class="card">
        <div class="cardHeader">
          <span>Live map</span>
          <span class="muted">updates on click</span>
        </div>
        <iframe id="map" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
      </div>
    </div>
  </div>

<script>
/**
 * KEY IDEA:
 * Instead of trying to list "every place", we store neighborhoods + category queries.
 * Each click is a live Google Maps search (infinite results).
 */

// Neighborhood base list (edit/add freely)
const NEIGHBORHOODS = [
  { name:"Covent Garden", hint:"theatre + cute streets + central" },
  { name:"Soho", hint:"nightlife + food + walkable chaos" },
  { name:"Shoreditch", hint:"street art + vintage + coffee" },
  { name:"Notting Hill", hint:"pastel streets + markets" },
  { name:"South Bank", hint:"river walk + views + museums" },
  { name:"Kensington", hint:"museums + pretty residential" },
  { name:"Camden", hint:"markets + live music" },
  { name:"Borough", hint:"food market central" },
  { name:"Mayfair", hint:"shopping + fancy galleries" },
  { name:"Greenwich", hint:"park + maritime vibes" },
  { name:"Hampstead", hint:"village feel + heath" },
  { name:"City of London", hint:"historic + skyline + markets" }
];

// Categories you asked for: lunch, pilates, etc.
// Add/remove categories here and it updates everywhere.
const CATEGORIES = [
  { key:"lunch", label:"Lunch", q:(n)=>`best lunch near ${n} London` },
  { key:"coffee", label:"Coffee", q:(n)=>`best coffee near ${n} London` },
  { key:"brunch", label:"Brunch", q:(n)=>`best brunch near ${n} London` },
  { key:"bakeries", label:"Bakeries", q:(n)=>`best bakery near ${n} London` },
  { key:"pubs", label:"Pubs", q:(n)=>`best pubs near ${n} London` },
  { key:"cocktails", label:"Cocktails", q:(n)=>`best cocktail bars near ${n} London` },
  { key:"markets", label:"Markets", q:(n)=>`markets near ${n} London` },
  { key:"museums", label:"Museums", q:(n)=>`museums near ${n} London` },
  { key:"galleries", label:"Art galleries", q:(n)=>`art galleries near ${n} London` },
  { key:"parks", label:"Parks", q:(n)=>`parks near ${n} London` },
  { key:"views", label:"Views", q:(n)=>`best viewpoints near ${n} London` },
  { key:"walks", label:"Walks", q:(n)=>`best walks near ${n} London` },
  { key:"thrift", label:"Thrift/Vintage", q:(n)=>`vintage shops near ${n} London` },
  { key:"bookshops", label:"Bookshops", q:(n)=>`independent bookshops near ${n} London` },
  { key:"pilates", label:"Pilates", q:(n)=>`pilates studio near ${n} London` },
  { key:"yoga", label:"Yoga", q:(n)=>`yoga studio near ${n} London` },
  { key:"shopping", label:"Shopping", q:(n)=>`best shopping streets near ${n} London` },
  { key:"hidden", label:"Hidden gems", q:(n)=>`hidden gems near ${n} London` },
  { key:"photo", label:"Photo spots", q:(n)=>`best photo spots near ${n} London` },
];

// “100+ more” generator templates (gives you tons of searches instantly)
const IDEA_TEMPLATES = [
  "best lunch near {n} London",
  "cheap eats near {n} London",
  "late night food near {n} London",
  "food hall near {n} London",
  "best coffee near {n} London",
  "best bakery near {n} London",
  "dessert near {n} London",
  "afternoon tea near {n} London",
  "best pubs near {n} London",
  "historic pubs near {n} London",
  "cocktail bars near {n} London",
  "rooftop bars near {n} London",
  "markets near {n} London",
  "street food near {n} London",
  "museums near {n} London",
  "small museums near {n} London",
  "art galleries near {n} London",
  "free exhibitions near {n} London",
  "parks near {n} London",
  "gardens near {n} London",
  "best viewpoints near {n} London",
  "sunset spots near {n} London",
  "walks near {n} London",
  "riverside walk near {n} London",
  "canal walk near {n} London",
  "architecture walk near {n} London",
  "cute streets near {n} London",
  "mews streets near {n} London",
  "hidden courtyards near {n} London",
  "hidden gems near {n} London",
  "things to do tonight near {n} London",
  "live music near {n} London",
  "jazz bar near {n} London",
  "comedy club near {n} London",
  "theatre near {n} London",
  "cinema near {n} London",
  "bookstores near {n} London",
  "record stores near {n} London",
  "vintage shops near {n} London",
  "thrift stores near {n} London",
  "shopping streets near {n} London",
  "pilates studio near {n} London",
  "yoga studio near {n} London",
  "barre studio near {n} London",
  "spa near {n} London",
  "nail salon near {n} London",
  "best gyms near {n} London",
  "free things to do near {n} London",
  "Instagram spots near {n} London",
  "street art near {n} London",
  "museum late opening near {n} London",
].flatMap(x=>[x]) // keep simple
  .slice(0,120); // 100+ by default

function mapsSearchUrl(query){
  return `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(query)}`;
}

// Map embed (no API key needed): uses "q=...&output=embed"
function mapsEmbedUrl(query){
  return `https://www.google.com/maps?q=${encodeURIComponent(query)}&output=embed`;
}

const els = {
  neighList: document.getElementById("neighList"),
  neighCount: document.getElementById("neighCount"),
  chips: document.getElementById("chips"),
  quickLinks: document.getElementById("quickLinks"),
  midTitle: document.getElementById("midTitle"),
  midMeta: document.getElementById("midMeta"),
  map: document.getElementById("map"),
  status: document.getElementById("status"),
  openMapsBtn: document.getElementById("openMapsBtn"),
  moreBtn: document.getElementById("moreBtn"),
  resetBtn: document.getElementById("resetBtn"),
};

const state = {
  neighborhood: NEIGHBORHOODS[0]?.name || "London",
  categoryKey: "lunch",
  lastQuery: ""
};

function setQuery(query){
  state.lastQuery = query;
  els.map.src = mapsEmbedUrl(query);
  els.openMapsBtn.href = mapsSearchUrl(query);
  els.status.textContent = `Showing: “${query}” (map + Maps link updated)`;
}

function renderNeighborhoods(){
  els.neighCount.textContent = `${NEIGHBORHOODS.length}`;
  els.neighList.innerHTML = NEIGHBORHOODS.map(n=>{
    const active = (n.name===state.neighborhood) ? "active" : "";
    return `
      <div class="neigh ${active}" data-n="${n.name}">
        <div style="font-weight:700">${n.name}</div>
        <small>${n.hint}</small>
      </div>
    `;
  }).join("");

  els.neighList.querySelectorAll(".neigh").forEach(el=>{
    el.addEventListener("click", ()=>{
      state.neighborhood = el.getAttribute("data-n");
      renderAll();
    });
  });
}

function renderCategories(){
  els.midTitle.textContent = state.neighborhood;
  els.midMeta.textContent = "tap a category";

  els.chips.innerHTML = CATEGORIES.map(c=>{
    const active = (c.key===state.categoryKey) ? "active" : "";
    return `<div class="chip ${active}" data-k="${c.key}">${c.label}</div>`;
  }).join("");

  els.chips.querySelectorAll(".chip").forEach(el=>{
    el.addEventListener("click", ()=>{
      state.categoryKey = el.getAttribute("data-k");
      renderAll();
    });
  });
}

function renderQuickLinks(){
  // Show a handful of “most useful” quick links (you can change this set)
  const featuredKeys = ["lunch","coffee","pilates","museums","markets","views","walks","hidden"];
  const featured = featuredKeys
    .map(k=>CATEGORIES.find(c=>c.key===k))
    .filter(Boolean);

  els.quickLinks.innerHTML = featured.map(c=>{
    const q = c.q(state.neighborhood);
    return `
      <div class="linkTile">
        <strong>${c.label}</strong>
        <div class="q">${q}</div>
        <a class="btn primary" href="${mapsSearchUrl(q)}" target="_blank" rel="noopener">Open in Maps</a>
        <button class="btn" data-q="${q}">Show on map</button>
      </div>
    `;
  }).join("");

  els.quickLinks.querySelectorAll("button[data-q]").forEach(btn=>{
    btn.addEventListener("click", ()=> setQuery(btn.getAttribute("data-q")));
  });
}

function applyCurrent(){
  const cat = CATEGORIES.find(c=>c.key===state.categoryKey) || CATEGORIES[0];
  const q = cat.q(state.neighborhood);
  setQuery(q);
}

function open100More(){
  const n = state.neighborhood;
  // Create a new window with a simple list of 100+ queries (all clickable)
  const queries = IDEA_TEMPLATES.map(t => t.replaceAll("{n}", n));
  const html = `
    <html><head><title>100+ ideas near ${n}</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <style>
      body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;margin:18px;background:#0b0f17;color:#e9eefc}
      a{color:#9fc0ff;text-decoration:none} a:hover{text-decoration:underline}
      .item{padding:10px 0;border-bottom:1px solid rgba(255,255,255,.10)}
      small{color:#a9b4d0}
    </style></head><body>
      <h2>100+ ideas near ${n}</h2>
      <small>Click any query to open Google Maps results.</small>
      ${queries.map(q=>`<div class="item"><a target="_blank" href="${mapsSearchUrl(q)}">${q}</a></div>`).join("")}
    </body></html>
  `;
  const w = window.open("", "_blank");
  w.document.write(html);
  w.document.close();
}

function renderAll(){
  renderNeighborhoods();
  renderCategories();
  renderQuickLinks();
  applyCurrent();
}

els.moreBtn.addEventListener("click", open100More);
els.resetBtn.addEventListener("click", ()=>{
  state.neighborhood = NEIGHBORHOODS[0]?.name || "London";
  state.categoryKey = "lunch";
  renderAll();
});

renderAll();
</script>
</body>
</html>
