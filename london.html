<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>London Explorer — Cool Things To Do</title>
  <style>
    :root{
      --bg:#0b1020; --panel:#0f1733; --panel2:#101a3a; --text:#e8ecff; --muted:#aab3da;
      --line:rgba(255,255,255,.10); --chip:rgba(255,255,255,.08); --chip2:rgba(255,255,255,.12);
      --ok:#4ee7a8; --warn:#ffd36b; --bad:#ff6b8a;
      --shadow: 0 18px 40px rgba(0,0,0,.35);
      --r:18px;
      --font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family:var(--font); color:var(--text);
      background: radial-gradient(1200px 700px at 20% -10%, rgba(78,231,168,.18), transparent 55%),
                  radial-gradient(1000px 700px at 95% 0%, rgba(255,107,138,.18), transparent 55%),
                  radial-gradient(900px 800px at 40% 120%, rgba(120,160,255,.16), transparent 55%),
                  var(--bg);
    }
    a{color:inherit}
    .wrap{max-width:1200px; margin:0 auto; padding:26px 18px 42px}
    header{
      display:flex; gap:14px; align-items:flex-start; justify-content:space-between; flex-wrap:wrap;
      margin-bottom:16px;
    }
    .title{
      display:flex; flex-direction:column; gap:6px;
    }
    h1{margin:0; font-size:28px; letter-spacing:.2px}
    .sub{color:var(--muted); max-width:56ch; line-height:1.35}
    .meta{
      display:flex; gap:10px; align-items:center; flex-wrap:wrap;
      background:rgba(255,255,255,.05); border:1px solid var(--line);
      padding:10px 12px; border-radius:999px;
    }
    .pill{display:inline-flex; align-items:center; gap:8px; color:var(--muted); font-size:13px}
    .dot{width:8px; height:8px; border-radius:50%; background:var(--ok); box-shadow:0 0 0 3px rgba(78,231,168,.15)}
    .grid{
      display:grid;
      grid-template-columns: 1.35fr .65fr;
      gap:16px;
      align-items:start;
    }
    @media (max-width: 980px){
      .grid{grid-template-columns:1fr}
    }
    .panel{
      background:linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.03));
      border:1px solid var(--line);
      border-radius:var(--r);
      box-shadow:var(--shadow);
      overflow:hidden;
    }
    .panel .inner{padding:14px}
    .controls{
      display:grid;
      grid-template-columns: 1.25fr .9fr .9fr .7fr;
      gap:10px;
    }
    @media (max-width: 980px){
      .controls{grid-template-columns: 1fr 1fr}
    }
    @media (max-width: 560px){
      .controls{grid-template-columns:1fr}
    }
    .field{
      display:flex; flex-direction:column; gap:6px;
    }
    label{font-size:12px; color:var(--muted)}
    input, select{
      width:100%;
      background:rgba(255,255,255,.06);
      border:1px solid var(--line);
      color:var(--text);
      padding:10px 12px;
      border-radius:12px;
      outline:none;
    }
    input:focus, select:focus{border-color: rgba(78,231,168,.45); box-shadow:0 0 0 4px rgba(78,231,168,.12)}
    .chips{display:flex; flex-wrap:wrap; gap:8px; margin-top:12px}
    .chip{
      cursor:pointer;
      user-select:none;
      background:var(--chip);
      border:1px solid var(--line);
      color:var(--muted);
      padding:8px 10px;
      border-radius:999px;
      font-size:13px;
      display:inline-flex; align-items:center; gap:8px;
      transition:.15s transform, .15s background, .15s color, .15s border-color;
    }
    .chip:hover{transform:translateY(-1px); background:var(--chip2); color:var(--text)}
    .chip.active{background:rgba(78,231,168,.14); border-color:rgba(78,231,168,.35); color:var(--text)}
    .chip small{opacity:.9; color:var(--muted)}
    .toolbar{
      display:flex; justify-content:space-between; align-items:center; gap:10px;
      padding:10px 14px;
      border-top:1px solid var(--line);
      background:rgba(0,0,0,.10);
      flex-wrap:wrap;
    }
    .btn{
      cursor:pointer;
      border:1px solid var(--line);
      background:rgba(255,255,255,.06);
      color:var(--text);
      padding:9px 11px;
      border-radius:12px;
      font-size:13px;
      display:inline-flex; align-items:center; gap:8px;
    }
    .btn:hover{background:rgba(255,255,255,.10)}
    .btn.primary{
      background:rgba(78,231,168,.16);
      border-color:rgba(78,231,168,.35);
    }
    .btn.danger{
      background:rgba(255,107,138,.14);
      border-color:rgba(255,107,138,.35);
    }
    .count{color:var(--muted); font-size:13px}
    .cards{
      padding:14px;
      display:grid;
      grid-template-columns: repeat(2, minmax(0,1fr));
      gap:12px;
    }
    @media (max-width: 700px){
      .cards{grid-template-columns:1fr}
    }
    .card{
      background:rgba(255,255,255,.05);
      border:1px solid var(--line);
      border-radius:16px;
      overflow:hidden;
      display:flex; flex-direction:column;
      min-height:150px;
    }
    .cardTop{
      padding:12px 12px 10px;
      display:flex; justify-content:space-between; gap:10px;
    }
    .card h3{margin:0; font-size:16px; line-height:1.25}
    .card p{margin:6px 0 0; color:var(--muted); font-size:13px; line-height:1.35}
    .badges{display:flex; gap:6px; flex-wrap:wrap; margin-top:8px}
    .badge{
      font-size:12px; color:var(--muted);
      padding:5px 8px; border-radius:999px;
      border:1px solid var(--line);
      background:rgba(0,0,0,.12);
    }
    .badge.good{border-color:rgba(78,231,168,.25); background:rgba(78,231,168,.10)}
    .badge.warn{border-color:rgba(255,211,107,.25); background:rgba(255,211,107,.10)}
    .badge.kind{border-color:rgba(120,160,255,.25); background:rgba(120,160,255,.10)}
    .cardBot{
      margin-top:auto;
      padding:10px 12px 12px;
      border-top:1px solid var(--line);
      display:flex; gap:8px; justify-content:space-between; align-items:center;
      background:rgba(0,0,0,.10);
    }
    .actions{display:flex; gap:8px; flex-wrap:wrap}
    .link{
      color:var(--text);
      text-decoration:none;
      border:1px solid var(--line);
      background:rgba(255,255,255,.06);
      padding:8px 10px;
      border-radius:12px;
      font-size:13px;
      display:inline-flex; align-items:center; gap:8px;
    }
    .link:hover{background:rgba(255,255,255,.10)}
    .fav{
      cursor:pointer;
      width:36px; height:36px;
      border-radius:12px;
      display:grid; place-items:center;
      border:1px solid var(--line);
      background:rgba(255,255,255,.06);
    }
    .fav.active{background:rgba(255,211,107,.14); border-color:rgba(255,211,107,.35)}
    .sideHead{
      padding:14px;
      border-bottom:1px solid var(--line);
      background:rgba(0,0,0,.10);
      display:flex; align-items:center; justify-content:space-between; gap:10px;
    }
    .sideHead h2{margin:0; font-size:16px}
    .sideHead .mini{color:var(--muted); font-size:12px}
    .sideBody{padding:14px}
    .list{display:flex; flex-direction:column; gap:10px}
    .item{
      border:1px solid var(--line);
      background:rgba(255,255,255,.05);
      border-radius:14px;
      padding:10px;
      display:flex; justify-content:space-between; gap:10px; align-items:flex-start;
    }
    .item b{display:block; font-size:13px; line-height:1.25}
    .item span{display:block; font-size:12px; color:var(--muted); margin-top:4px}
    .x{
      cursor:pointer;
      border:1px solid var(--line);
      background:rgba(255,255,255,.06);
      color:var(--text);
      width:30px; height:30px; border-radius:10px;
      display:grid; place-items:center;
      flex:0 0 auto;
    }
    .empty{color:var(--muted); font-size:13px; line-height:1.4}
    .footerNote{margin-top:12px; color:var(--muted); font-size:12px; line-height:1.4}
    .kbd{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      font-size:12px; padding:2px 6px; border:1px solid var(--line); border-radius:8px;
      background:rgba(0,0,0,.18); color:var(--text);
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="title">
        <h1>London Explorer</h1>
        <div class="sub">
          Search, filter, and save a London-only list of cool places to see and do.
          (Starter dataset included — add your own in the code.)
        </div>
      </div>
      <div class="meta">
        <div class="pill"><span class="dot"></span> London-only directory</div>
        <div class="pill">Tips: <span class="kbd">/</span> focuses search · <span class="kbd">f</span> toggles favorites view</div>
      </div>
    </header>

    <div class="grid">
      <!-- Main panel -->
      <section class="panel" aria-label="Places">
        <div class="inner">
          <div class="controls">
            <div class="field">
              <label for="q">Search</label>
              <input id="q" placeholder="Try: cemetery, Soho, neon, Roman, market…" autocomplete="off" />
            </div>
            <div class="field">
              <label for="neighborhood">Area</label>
              <select id="neighborhood">
                <option value="">All areas</option>
              </select>
            </div>
            <div class="field">
              <label for="kind">Type</label>
              <select id="kind">
                <option value="">All types</option>
              </select>
            </div>
            <div class="field">
              <label for="sort">Sort</label>
              <select id="sort">
                <option value="recommended">Recommended</option>
                <option value="name">Name (A→Z)</option>
                <option value="free">Free-first</option>
              </select>
            </div>
          </div>

          <div class="chips" id="chips"></div>
        </div>

        <div class="toolbar">
          <div class="count" id="count">—</div>
          <div style="display:flex; gap:8px; flex-wrap:wrap">
            <button class="btn" id="toggleFavs" title="Show only favorites (shortcut: f)">⭐ Favorites</button>
            <button class="btn" id="clearFilters">Reset filters</button>
            <button class="btn primary" id="exportItin">Export itinerary</button>
          </div>
        </div>

        <div class="cards" id="cards"></div>
      </section>

      <!-- Side panel -->
      <aside class="panel" aria-label="Itinerary">
        <div class="sideHead">
          <div>
            <h2>My Itinerary</h2>
            <div class="mini" id="itinMeta">0 saved</div>
          </div>
          <button class="btn danger" id="clearItin">Clear</button>
        </div>
        <div class="sideBody">
          <div class="list" id="itin"></div>
          <div class="footerNote">
            Pro tip: Use this as your “shortlist,” then click <b>Map</b> to cluster stops by area.
          </div>
        </div>
      </aside>
    </div>
  </div>

<script>
/**
 * London Explorer — single-file app
 * - No external libs
 * - Data lives in PLACES
 * - Favorites + itinerary stored in localStorage
 */

const PLACES = [

  // --- ICONIC / MUST-DO ---
  {id:"towerbridge", name:"Tower Bridge Walkway", area:"Tower Hill", kind:"Views & Landmarks", tags:["views","historic","photos"], blurb:"Classic London skyline shots from the bridge + glass floor walkway.", free:false, time:"1–2h", mapQuery:"Tower Bridge"},
  {id:"westminster", name:"Westminster Abbey (exterior + area)", area:"Westminster", kind:"Views & Landmarks", tags:["historic","photos","walk"], blurb:"Even if you don’t go inside, the surrounding area is peak London.", free:true, time:"Quick", mapQuery:"Westminster Abbey"},
  {id:"buckingham", name:"Buckingham Palace (front gates)", area:"Westminster", kind:"Views & Landmarks", tags:["historic","photos","walk"], blurb:"Quick iconic stop—pair with St James’s Park after.", free:true, time:"Quick", mapQuery:"Buckingham Palace"},
  {id:"stpauls", name:"St Paul’s Cathedral (viewpoints nearby)", area:"City of London", kind:"Views & Landmarks", tags:["views","historic","photos"], blurb:"Go for the dome views from Millennium Bridge / One New Change rooftop.", free:true, time:"1–2h", mapQuery:"St Paul's Cathedral"},
  {id:"millenniumbridge", name:"Millennium Bridge", area:"City of London", kind:"Architecture & Streets", tags:["views","walk","photos"], blurb:"Best pedestrian bridge for skyline shots—especially at golden hour.", free:true, time:"Quick", mapQuery:"Millennium Bridge London"},
  {id:"tate_modern", name:"Tate Modern", area:"Bankside", kind:"Museums & Collections", tags:["indoor","art","views"], blurb:"Modern art + a great free museum. Don’t miss the viewing level.", free:true, time:"Half-day", mapQuery:"Tate Modern"},
  {id:"british_museum", name:"The British Museum", area:"Bloomsbury", kind:"Museums & Collections", tags:["indoor","history","free"], blurb:"World-class collections. Go early to avoid crowds.", free:true, time:"Half-day", mapQuery:"British Museum"},
  {id:"national_gallery", name:"National Gallery", area:"Trafalgar Square", kind:"Museums & Collections", tags:["indoor","art","free"], blurb:"Classic art in the center of everything.", free:true, time:"1–2h", mapQuery:"National Gallery London"},
  {id:"vanda", name:"V&A (Victoria and Albert Museum)", area:"South Kensington", kind:"Museums & Collections", tags:["indoor","art","design","free"], blurb:"Design, fashion, decor—one of London’s best.", free:true, time:"Half-day", mapQuery:"Victoria and Albert Museum"},
  {id:"natural_history", name:"Natural History Museum", area:"South Kensington", kind:"Museums & Collections", tags:["indoor","free","family"], blurb:"Dinosaurs + iconic building. Great rainy-day stop.", free:true, time:"Half-day", mapQuery:"Natural History Museum London"},
  {id:"science_museum", name:"Science Museum", area:"South Kensington", kind:"Museums & Collections", tags:["indoor","free"], blurb:"Hands-on science and tech history.", free:true, time:"Half-day", mapQuery:"Science Museum London"},
  {id:"hydepark", name:"Hyde Park", area:"Hyde Park", kind:"Parks & Gardens", tags:["walk","picnic","free"], blurb:"Classic London park—easy to pair with Kensington.", free:true, time:"Half-day", mapQuery:"Hyde Park London"},
  {id:"regents_park", name:"Regent’s Park + Queen Mary’s Gardens", area:"Regent’s Park", kind:"Parks & Gardens", tags:["walk","photos","free"], blurb:"One of the prettiest parks—especially in bloom season.", free:true, time:"Half-day", mapQuery:"Regent's Park London"},
  {id:"primrose", name:"Primrose Hill", area:"Primrose Hill", kind:"Views & Landmarks", tags:["views","sunset","walk"], blurb:"Quick uphill walk for a perfect skyline view.", free:true, time:"1–2h", mapQuery:"Primrose Hill"},
  {id:"hampsteadheath", name:"Hampstead Heath (Parliament Hill)", area:"Hampstead", kind:"Parks & Gardens", tags:["views","picnic","sunset"], blurb:"Big nature energy + one of the best city views.", free:true, time:"Half-day", mapQuery:"Parliament Hill Hampstead Heath"},
  {id:"greenwich", name:"Greenwich Park + Meridian Line area", area:"Greenwich", kind:"Parks & Gardens", tags:["views","history","walk"], blurb:"Royal park + maritime history + great views of Canary Wharf.", free:true, time:"Half-day", mapQuery:"Greenwich Park"},
  {id:"sky_garden", name:"Sky Garden", area:"City of London", kind:"Views & Landmarks", tags:["views","reservations","photos"], blurb:"Free indoor garden viewpoint—book ahead.", free:true, time:"1–2h", mapQuery:"Sky Garden London"},
  {id:"one_new_change", name:"One New Change Rooftop", area:"City of London", kind:"Views & Landmarks", tags:["views","free","photos"], blurb:"Free rooftop view facing St Paul’s dome.", free:true, time:"Quick", mapQuery:"One New Change rooftop"},
  {id:"southbank_walk", name:"South Bank Walk (Waterloo → London Bridge)", area:"South Bank", kind:"Walks", tags:["walk","views","night"], blurb:"Best river walk with nonstop sights, snacks, and skyline moments.", free:true, time:"Half-day", mapQuery:"South Bank London"},
  {id:"nottinghill", name:"Notting Hill + Portobello Road", area:"Notting Hill", kind:"Markets", tags:["market","photos","walk"], blurb:"Colorful streets + famous market day vibe.", free:true, time:"Half-day", mapQuery:"Portobello Road Market"},
  {id:"borough_market", name:"Borough Market", area:"Southwark", kind:"Food & Drink", tags:["foodie","market","busy"], blurb:"Legendary food market—come hungry.", free:true, time:"1–2h", mapQuery:"Borough Market"},
  {id:"camden_market", name:"Camden Market", area:"Camden", kind:"Markets", tags:["street-food","shopping","crowds"], blurb:"Big energy, stalls, food, and people-watching.", free:true, time:"Half-day", mapQuery:"Camden Market"},
  {id:"spitalfields", name:"Old Spitalfields Market", area:"Shoreditch", kind:"Markets", tags:["market","foodie","shopping"], blurb:"Great mix of food + shops + vintage nearby.", free:true, time:"1–2h", mapQuery:"Old Spitalfields Market"},
  {id:"columbia_road", name:"Columbia Road Flower Market (Sunday)", area:"Bethnal Green", kind:"Markets", tags:["flowers","photos","sunday"], blurb:"Loud, lively, and iconic Sunday morning.", free:true, time:"1–2h", mapQuery:"Columbia Road Flower Market"},

  // --- HIDDEN / QUIRKY / ATLAS-OBSCURA ENERGY ---
  {id:"stdunstan", name:"St Dunstan-in-the-East (Ruins Garden)", area:"City of London", kind:"Parks & Gardens", tags:["ruins","quiet","photos"], blurb:"A bombed-out church turned into a secret garden.", free:true, time:"Quick", mapQuery:"St Dunstan in the East"},
  {id:"mithraeum", name:"London Mithraeum (Temple of Mithras)", area:"City of London", kind:"History & Ruins", tags:["roman","underground","historic"], blurb:"Ancient Roman temple remains under modern London.", free:true, time:"1–2h", mapQuery:"London Mithraeum"},
  {id:"guildhall_amp", name:"Guildhall Roman Amphitheatre", area:"City of London", kind:"History & Ruins", tags:["roman","quick","underground"], blurb:"A Roman amphitheatre outline hidden under the city.", free:true, time:"Quick", mapQuery:"Guildhall Roman Amphitheatre"},
  {id:"seven_noses", name:"Seven Noses of Soho (scavenger hunt)", area:"Soho", kind:"Street Art & Hidden Finds", tags:["quirky","walk","photos"], blurb:"Find the hidden noses stuck onto buildings around Soho.", free:true, time:"1–2h", mapQuery:"Seven Noses of Soho"},
  {id:"gods_junkyard", name:"God’s Own Junkyard", area:"Walthamstow", kind:"Art & Design", tags:["neon","photos","indoor"], blurb:"Neon sign wonderland—pure photo candy.", free:"unknown", time:"1–2h", mapQuery:"God's Own Junkyard"},
  {id:"novelty_automation", name:"Novelty Automation", area:"Holborn", kind:"Games & Experiences", tags:["indoor","quirky"], blurb:"Satirical arcade machines that are hilarious and strange.", free:false, time:"1–2h", mapQuery:"Novelty Automation London"},
  {id:"viktor_wynd", name:"Viktor Wynd Museum of Curiosities", area:"Hackney", kind:"Museums & Collections", tags:["oddities","indoor","night"], blurb:"Cabinet of curiosities—art + weird objects + vibes.", free:false, time:"1–2h", mapQuery:"Viktor Wynd Museum"},
  {id:"leadenhall", name:"Leadenhall Market", area:"City of London", kind:"Architecture & Streets", tags:["historic","market","photos"], blurb:"Victorian covered market with gorgeous ironwork.", free:true, time:"Quick", mapQuery:"Leadenhall Market"},
  {id:"cecils", name:"Cecil Court", area:"Covent Garden", kind:"Architecture & Streets", tags:["bookshops","walk","photos"], blurb:"Tiny alley packed with bookshops and antiques.", free:true, time:"Quick", mapQuery:"Cecil Court London"},
  {id:"neals_yard", name:"Neal’s Yard", area:"Covent Garden", kind:"Architecture & Streets", tags:["photos","walk"], blurb:"Hidden colorful courtyard—quick and cute.", free:true, time:"Quick", mapQuery:"Neal's Yard London"},
  {id:"postmans", name:"Postman’s Park", area:"City of London", kind:"Parks & Gardens", tags:["quiet","historic"], blurb:"Peaceful park with a memorial to heroic self-sacrifice.", free:true, time:"Quick", mapQuery:"Postman's Park"},
  {id:"little_venice", name:"Little Venice", area:"Paddington", kind:"Walks", tags:["walk","photos","canal"], blurb:"Canalside strolls + boats + cafés.", free:true, time:"1–2h", mapQuery:"Little Venice London"},
  {id:"regents_canal", name:"Regent’s Canal Walk (Little Venice → Camden)", area:"West & North London", kind:"Walks", tags:["walk","canal","free"], blurb:"Scenic canal walk connecting neighborhoods.", free:true, time:"Half-day", mapQuery:"Regent's Canal walk Camden"},

  // --- FOOD & DRINK: MARKETS / ICONIC EATS / FUN SPOTS ---
  {id:"dishoom_covent", name:"Dishoom (Covent Garden)", area:"Covent Garden", kind:"Food & Drink", tags:["foodie"], blurb:"Beloved Bombay café vibe—great for brunch or dinner.", free:false, time:"1–2h", mapQuery:"Dishoom Covent Garden"},
  {id:"padella", name:"Padella", area:"Borough", kind:"Food & Drink", tags:["italian","foodie"], blurb:"Famous fresh pasta spot near Borough Market.", free:false, time:"1–2h", mapQuery:"Padella London"},
  {id:"flat_iron", name:"Flat Iron", area:"Soho", kind:"Food & Drink", tags:["steak","foodie"], blurb:"Affordable steak + fun vibe (multiple locations).", free:false, time:"1–2h", mapQuery:"Flat Iron Soho"},
  {id:"the_breakfast_club", name:"The Breakfast Club", area:"Soho", kind:"Food & Drink", tags:["brunch","foodie"], blurb:"Classic London brunch institution.", free:false, time:"1–2h", mapQuery:"The Breakfast Club Soho"},
  {id:"duck_waffle", name:"Duck & Waffle (views)", area:"City of London", kind:"Food & Drink", tags:["views","foodie"], blurb:"Sky-high dining—great for late-night or sunrise vibes.", free:false, time:"1–2h", mapQuery:"Duck & Waffle"},
  {id:"sketch", name:"Sketch", area:"Mayfair", kind:"Food & Drink", tags:["photos","foodie"], blurb:"Iconic aesthetic spot—very “London Instagram.”", free:false, time:"1–2h", mapQuery:"Sketch London"},
  {id:"mercato_mayfair", name:"Mercato Mayfair", area:"Mayfair", kind:"Food & Drink", tags:["market","indoor","foodie"], blurb:"Food hall inside a former church—super cool interior.", free:true, time:"1–2h", mapQuery:"Mercato Mayfair"},
  {id:"mercato_met", name:"Mercato Metropolitano", area:"Elephant & Castle", kind:"Food & Drink", tags:["market","foodie"], blurb:"Big food market vibe—lots of options.", free:true, time:"1–2h", mapQuery:"Mercato Metropolitano London"},
  {id:"seven_dials_market", name:"Seven Dials Market", area:"Covent Garden", kind:"Food & Drink", tags:["market","foodie"], blurb:"Food hall with solid variety—easy lunch stop.", free:true, time:"1–2h", mapQuery:"Seven Dials Market"},
  {id:"maltby_st", name:"Maltby Street Market (weekends)", area:"Bermondsey", kind:"Food & Drink", tags:["market","foodie"], blurb:"Smaller, local market with great bites.", free:true, time:"1–2h", mapQuery:"Maltby Street Market"},
  {id:"brick_lane_bagel", name:"Brick Lane Beigel Bake", area:"Shoreditch", kind:"Food & Drink", tags:["late-night","foodie"], blurb:"Legendary late-night bagels—classic London snack.", free:false, time:"Quick", mapQuery:"Beigel Bake Brick Lane"},
  {id:"chinatown", name:"Chinatown food crawl", area:"Chinatown", kind:"Food & Drink", tags:["foodie","walk"], blurb:"Pick a few spots and snack your way through.", free:false, time:"1–2h", mapQuery:"Chinatown London"},
  {id:"broadway_market", name:"Broadway Market", area:"Hackney", kind:"Markets", tags:["foodie","walk"], blurb:"Saturday market + cute neighborhood strolls.", free:true, time:"1–2h", mapQuery:"Broadway Market London"},
  {id:"mister_lasagna", name:"La Fromagerie (Marylebone)", area:"Marylebone", kind:"Food & Drink", tags:["foodie"], blurb:"Cheese heaven + gourmet goods + picnic potential.", free:false, time:"Quick", mapQuery:"La Fromagerie Marylebone"},
  {id:"twinings", name:"Twinings Tea Shop", area:"City of London", kind:"Food & Drink", tags:["tea","historic"], blurb:"Tiny historic tea shop—quick and charming.", free:true, time:"Quick", mapQuery:"Twinings Tea Shop London"},

  // --- PUBS / CLASSIC LONDON DRINKS ---
  {id:"churchill_arms", name:"The Churchill Arms", area:"Notting Hill", kind:"Food & Drink", tags:["pub","photos"], blurb:"Most photographed pub exterior—flowers everywhere.", free:true, time:"Quick", mapQuery:"The Churchill Arms London"},
  {id:"the_george", name:"The George Inn", area:"Borough", kind:"Food & Drink", tags:["historic","pub"], blurb:"Historic pub courtyard near London Bridge.", free:true, time:"1–2h", mapQuery:"The George Inn London"},
  {id:"prospect_whitby", name:"The Prospect of Whitby", area:"Wapping", kind:"Food & Drink", tags:["pub","river","historic"], blurb:"Riverside pub with old London vibes.", free:true, time:"1–2h", mapQuery:"Prospect of Whitby"},
  {id:"ye_olde", name:"Ye Olde Cheshire Cheese", area:"Fleet Street", kind:"Food & Drink", tags:["historic","pub"], blurb:"Old-school pub vibe—feels like time travel.", free:true, time:"1–2h", mapQuery:"Ye Olde Cheshire Cheese"},
  {id:"spain", name:"The Spaniards Inn", area:"Hampstead", kind:"Food & Drink", tags:["pub","historic"], blurb:"Classic countryside-feeling pub inside London.", free:true, time:"1–2h", mapQuery:"The Spaniards Inn Hampstead"},

  // --- NEIGHBORHOOD “VIBE” WALKS ---
  {id:"soho_walk", name:"Soho wander + Carnaby Street", area:"Soho", kind:"Walks", tags:["walk","shopping","night"], blurb:"Neon, music history, shops, and people-watching.", free:true, time:"Half-day", mapQuery:"Carnaby Street"},
  {id:"shoreditch_walk", name:"Shoreditch street art walk", area:"Shoreditch", kind:"Street Art & Hidden Finds", tags:["walk","photos"], blurb:"Graffiti, indie shops, and coffee spots—very London cool.", free:true, time:"Half-day", mapQuery:"Shoreditch street art"},
  {id:"covent", name:"Covent Garden (piazza + performers)", area:"Covent Garden", kind:"Walks", tags:["walk","photos"], blurb:"Street performers + shops + easy central stop.", free:true, time:"1–2h", mapQuery:"Covent Garden"},
  {id:"south_kens", name:"South Kensington museum quarter", area:"South Kensington", kind:"Walks", tags:["walk","free","indoor"], blurb:"V&A + Natural History + Science Museum in one zone.", free:true, time:"Half-day", mapQuery:"South Kensington museums"},
  {id:"marylebone", name:"Marylebone High Street stroll", area:"Marylebone", kind:"Walks", tags:["walk","shopping"], blurb:"Cute shops + cafés + chill neighborhood energy.", free:true, time:"1–2h", mapQuery:"Marylebone High Street"},
  {id:"kensington", name:"Kensington Gardens", area:"Kensington", kind:"Parks & Gardens", tags:["walk","free"], blurb:"Lovely park pairing with museums and Hyde Park.", free:true, time:"Half-day", mapQuery:"Kensington Gardens"},
  {id:"st_james", name:"St James’s Park", area:"Westminster", kind:"Parks & Gardens", tags:["walk","photos","free"], blurb:"Most ‘royal’ park—great between Buckingham + Westminster.", free:true, time:"1–2h", mapQuery:"St James's Park"},
  {id:"kew", name:"Kew Gardens", area:"Kew", kind:"Parks & Gardens", tags:["photos","nature"], blurb:"Botanical gardens + glasshouses—worth the trip.", free:false, time:"Half-day", mapQuery:"Kew Gardens"},
  {id:"richmond", name:"Richmond Park (deer spotting)", area:"Richmond", kind:"Parks & Gardens", tags:["nature","walk"], blurb:"Huge park with deer—feels like countryside.", free:true, time:"Half-day", mapQuery:"Richmond Park London"},
  {id:"canary", name:"Canary Wharf (modern skyline walk)", area:"Canary Wharf", kind:"Walks", tags:["views","walk"], blurb:"Modern London skyline—cool contrast to central.", free:true, time:"1–2h", mapQuery:"Canary Wharf"},

  // --- EXTRA MUSEUMS / EXPERIENCES ---
  {id:"imperial_war", name:"Imperial War Museum", area:"Lambeth", kind:"Museums & Collections", tags:["history","indoor","free"], blurb:"Powerful museum—very well done.", free:true, time:"Half-day", mapQuery:"Imperial War Museum London"},
  {id:"design_museum", name:"Design Museum", area:"Kensington", kind:"Museums & Collections", tags:["design","indoor"], blurb:"Modern design exhibits—great if you love branding + products.", free:"unknown", time:"1–2h", mapQuery:"Design Museum London"},
  {id:"tate_britain", name:"Tate Britain", area:"Pimlico", kind:"Museums & Collections", tags:["art","indoor","free"], blurb:"British art across centuries—often less crowded.", free:true, time:"1–2h", mapQuery:"Tate Britain"},
  {id:"sir_john", name:"Sir John Soane’s Museum", area:"Holborn", kind:"Museums & Collections", tags:["quirky","historic","indoor"], blurb:"A magical townhouse museum packed with artifacts.", free:true, time:"1–2h", mapQuery:"Sir John Soane's Museum"},
  {id:"leighton", name:"Leighton House Museum", area:"Kensington", kind:"Museums & Collections", tags:["art","indoor","photos"], blurb:"Insanely beautiful interiors—hidden gem museum.", free:false, time:"1–2h", mapQuery:"Leighton House Museum"},
  {id:"skyline_walkie", name:"Horizon 22 (viewpoint)", area:"City of London", kind:"Views & Landmarks", tags:["views","free"], blurb:"Free high viewpoint (availability varies; check booking).", free:true, time:"1–2h", mapQuery:"Horizon 22 London"},
  {id:"shard_view", name:"The View from The Shard", area:"London Bridge", kind:"Views & Landmarks", tags:["views","photos"], blurb:"Paid iconic viewpoint—amazing at sunset.", free:false, time:"1–2h", mapQuery:"The View from The Shard"},
  {id:"london_eye", name:"London Eye", area:"South Bank", kind:"Views & Landmarks", tags:["views"], blurb:"Touristy but fun if it’s your first time.", free:false, time:"1–2h", mapQuery:"London Eye"},
  {id:"ceremony_guard", name:"Changing of the Guard (timed event)", area:"Westminster", kind:"Games & Experiences", tags:["historic","photos"], blurb:"Check schedule; arrive early for a good view.", free:true, time:"1–2h", mapQuery:"Changing of the Guard London"},
// ✅ ADD-ON PACK: 120+ more London places (same format)
// Paste these INSIDE your existing const PLACES = [ ... ] array (anywhere), with commas between items.

  // ---------------------------
  // FOOD & DRINK (MORE)
  // ---------------------------
  {id:"dishoom_kx", name:"Dishoom (King’s Cross)", area:"King’s Cross", kind:"Food & Drink", tags:["food","walkable"], blurb:"Same iconic vibe, great pre-canal stroll meal.", free:false, time:"1–2h", mapQuery:"Dishoom King's Cross"},
  {id:"honest_burgers", name:"Honest Burgers (Soho)", area:"Soho", kind:"Food & Drink", tags:["food","walkable"], blurb:"Solid burgers + rosemary chips. Easy crowd-pleaser.", free:false, time:"1–2h", mapQuery:"Honest Burgers Soho"},
  {id:"bao_soho", name:"BAO (Soho)", area:"Soho", kind:"Food & Drink", tags:["food","walkable"], blurb:"Famous bao buns—go early or expect a wait.", free:false, time:"1–2h", mapQuery:"BAO Soho"},
  {id:"hoppers", name:"Hoppers (Soho)", area:"Soho", kind:"Food & Drink", tags:["food","walkable"], blurb:"Sri Lankan/Tamil comfort food. Great for sharing.", free:false, time:"1–2h", mapQuery:"Hoppers Soho"},
  {id:"mams_persian", name:"Berenjak (Soho)", area:"Soho", kind:"Food & Drink", tags:["food","walkable"], blurb:"Persian small plates—super vibey dinner spot.", free:false, time:"1–2h", mapQuery:"Berenjak Soho"},
  {id:"bancone_covent", name:"Bancone (Covent Garden)", area:"Covent Garden", kind:"Food & Drink", tags:["food","walkable"], blurb:"Handmade pasta—popular for a reason.", free:false, time:"1–2h", mapQuery:"Bancone Covent Garden"},
  {id:"gloria_shoreditch", name:"Gloria (Shoreditch)", area:"Shoreditch", kind:"Food & Drink", tags:["food","photo spots"], blurb:"Big Italian energy—fun decor + great for groups.", free:false, time:"1–2h", mapQuery:"Gloria Shoreditch"},
  {id:"circolo_popolare", name:"Circolo Popolare", area:"Fitzrovia", kind:"Food & Drink", tags:["food","photo spots"], blurb:"Italian party restaurant—very ‘London TikTok’.", free:false, time:"1–2h", mapQuery:"Circolo Popolare London"},
  {id:"the_ivys", name:"The Ivy (Covent Garden)", area:"Covent Garden", kind:"Food & Drink", tags:["food","photo spots"], blurb:"Classic ‘treat yourself’ London vibe.", free:false, time:"1–2h", mapQuery:"The Ivy Covent Garden"},
  {id:"brasserie_zedel", name:"Brasserie Zédel", area:"Piccadilly", kind:"Food & Drink", tags:["food","indoor"], blurb:"Grand French brasserie—great value for the setting.", free:false, time:"1–2h", mapQuery:"Brasserie Zedel"},
  {id:"jerk_jamaica", name:"Rudie’s Jerk Shack", area:"Soho", kind:"Food & Drink", tags:["food","walkable"], blurb:"Quick Caribbean bite when you’re exploring Soho.", free:false, time:"Quick", mapQuery:"Rudie's Jerk Shack Soho"},
  {id:"ramen_kanada", name:"Kanada-Ya Ramen", area:"Soho", kind:"Food & Drink", tags:["food","walkable"], blurb:"Top-tier ramen—expect lines at peak times.", free:false, time:"1–2h", mapQuery:"Kanada-Ya Soho"},
  {id:"flat_iron_covent", name:"Flat Iron (Covent Garden)", area:"Covent Garden", kind:"Food & Drink", tags:["food","walkable"], blurb:"Affordable steak + easy central location.", free:false, time:"1–2h", mapQuery:"Flat Iron Covent Garden"},
  {id:"duck_waffle", name:"Duck & Waffle", area:"City of London", kind:"Food & Drink", tags:["food","views","photo spots"], blurb:"Sky-high dining—late-night/early morning is iconic.", free:false, time:"1–2h", mapQuery:"Duck & Waffle"},
  {id:"eataly", name:"Eataly London", area:"Bishopsgate", kind:"Food & Drink", tags:["food","indoor"], blurb:"Italian food hall + groceries—easy stop near Liverpool St.", free:true, time:"1–2h", mapQuery:"Eataly London"},
  {id:"fortnum", name:"Fortnum & Mason (food halls)", area:"Piccadilly", kind:"Food & Drink", tags:["food","indoor","photo spots"], blurb:"Iconic luxury groceries + tea gifts + vibes.", free:true, time:"1–2h", mapQuery:"Fortnum & Mason"},
  {id:"liberty_food", name:"Liberty London (shopping + café)", area:"Soho", kind:"Food & Drink", tags:["food","photo spots","walkable"], blurb:"Gorgeous building—browse + quick café break.", free:true, time:"1–2h", mapQuery:"Liberty London"},
  {id:"gails", name:"GAIL’s Bakery (Marylebone)", area:"Marylebone", kind:"Food & Drink", tags:["food","walkable"], blurb:"Easy breakfast/pastry stop while wandering.", free:false, time:"Quick", mapQuery:"GAIL's Bakery Marylebone"},
  {id:"watchhouse", name:"WatchHouse Coffee (Covent Garden)", area:"Covent Garden", kind:"Food & Drink", tags:["food","walkable"], blurb:"Cute café + great coffee—good planning break.", free:false, time:"Quick", mapQuery:"WatchHouse Covent Garden"},
  {id:"grind", name:"Shoreditch Grind", area:"Shoreditch", kind:"Food & Drink", tags:["food","photo spots"], blurb:"Coffee by day, cocktails later—classic Shoreditch.", free:false, time:"1–2h", mapQuery:"Shoreditch Grind"},
  {id:"dovetail", name:"The Wolseley", area:"Piccadilly", kind:"Food & Drink", tags:["food","indoor"], blurb:"Classic London café-restaurant for breakfast/lunch.", free:false, time:"1–2h", mapQuery:"The Wolseley London"},
  {id:"harrods_food", name:"Harrods Food Halls", area:"Knightsbridge", kind:"Food & Drink", tags:["food","indoor","photo spots"], blurb:"Worth a walkthrough for the spectacle alone.", free:true, time:"1–2h", mapQuery:"Harrods Food Halls"},
  {id:"the_ivy_market", name:"The Ivy Market Grill", area:"Covent Garden", kind:"Food & Drink", tags:["food","walkable"], blurb:"Reliable central spot after sightseeing.", free:false, time:"1–2h", mapQuery:"Ivy Market Grill"},
  {id:"gbk", name:"Blacklock (Soho)", area:"Soho", kind:"Food & Drink", tags:["food"], blurb:"Chops + Sundays are legendary—book if you can.", free:false, time:"1–2h", mapQuery:"Blacklock Soho"},
  {id:"franco_manca", name:"Franco Manca (pizza)", area:"Multiple", kind:"Food & Drink", tags:["food"], blurb:"Affordable sourdough pizza—easy casual meal.", free:false, time:"1–2h", mapQuery:"Franco Manca London"},
  {id:"shake_shack", name:"Shake Shack (Covent Garden)", area:"Covent Garden", kind:"Food & Drink", tags:["food","walkable"], blurb:"Quick comfort food between stops.", free:false, time:"Quick", mapQuery:"Shake Shack Covent Garden"},
  {id:"crosstown", name:"Crosstown Doughnuts", area:"Soho", kind:"Food & Drink", tags:["food","walkable"], blurb:"Snack-worthy donuts—grab and go.", free:false, time:"Quick", mapQuery:"Crosstown Doughnuts Soho"},
  {id:"roast_borough", name:"Roast (Borough Market)", area:"Borough", kind:"Food & Drink", tags:["food","photo spots"], blurb:"Market-adjacent sit-down spot with a view of the bustle.", free:false, time:"1–2h", mapQuery:"Roast Borough Market"},
  {id:"fishers", name:"Poppies Fish & Chips", area:"Soho", kind:"Food & Drink", tags:["food"], blurb:"Classic fish & chips—very London.", free:false, time:"1–2h", mapQuery:"Poppies Fish & Chips Soho"},

  // ---------------------------
  // MARKETS (MORE)
  // ---------------------------
  {id:"camden_lock", name:"Camden Lock", area:"Camden", kind:"Markets", tags:["walkable","photo spots","food"], blurb:"Canal locks + market vibes + great people-watching.", free:true, time:"1–2h", mapQuery:"Camden Lock"},
  {id:"leather_lane", name:"Leather Lane Market (weekday lunch)", area:"Holborn", kind:"Markets", tags:["food","walkable"], blurb:"Weekday street food market—local London energy.", free:true, time:"1–2h", mapQuery:"Leather Lane Market"},
  {id:"greenwich_market", name:"Greenwich Market", area:"Greenwich", kind:"Markets", tags:["food","walkable","photo spots"], blurb:"Craft stalls + snacks—easy pairing with park/river.", free:true, time:"1–2h", mapQuery:"Greenwich Market London"},
  {id:"old_bailey_food", name:"Exmouth Market", area:"Clerkenwell", kind:"Markets", tags:["food","walkable"], blurb:"Street of cafés + small spots—nice casual stroll.", free:true, time:"1–2h", mapQuery:"Exmouth Market London"},
  {id:"mews_market", name:"Maltby Street Ropewalk (Bermondsey)", area:"Bermondsey", kind:"Markets", tags:["food"], blurb:"Archway market lane—great weekend bites.", free:true, time:"1–2h", mapQuery:"Maltby Street Market"},
  {id:"camden_stables", name:"Camden Stables Market", area:"Camden", kind:"Markets", tags:["food","photo spots"], blurb:"Stalls + street food + iconic Camden energy.", free:true, time:"Half-day", mapQuery:"Camden Stables Market"},
  {id:"berwick_st", name:"Berwick Street Market", area:"Soho", kind:"Markets", tags:["food","walkable"], blurb:"Weekday street market—grab lunch in Soho.", free:true, time:"1–2h", mapQuery:"Berwick Street Market"},
  {id:"whitecross_st", name:"Whitecross Street Market", area:"Old Street", kind:"Markets", tags:["food","walkable"], blurb:"Weekday lunch market—quick bite near Shoreditch edge.", free:true, time:"1–2h", mapQuery:"Whitecross Street Market"},
  {id:"brick_lane_market", name:"Brick Lane Market (weekends)", area:"Shoreditch", kind:"Markets", tags:["food","walkable"], blurb:"Vintage + snacks + street art nearby.", free:true, time:"Half-day", mapQuery:"Brick Lane Market"},
  {id:"southbank_centre_food", name:"Southbank Centre Food Market (weekends)", area:"South Bank", kind:"Markets", tags:["food","walkable","views"], blurb:"Riverside snacks during your South Bank walk.", free:true, time:"1–2h", mapQuery:"Southbank Centre Food Market"},

  // ---------------------------
  // MUSEUMS & COLLECTIONS (MORE)
  // ---------------------------
  {id:"imperial_war_north", name:"Imperial War Museum (main)", area:"Lambeth", kind:"Museums & Collections", tags:["indoor","history"], blurb:"Deep, powerful exhibits—plan time.", free:true, time:"Half-day", mapQuery:"Imperial War Museum London"},
  {id:"portrait_gallery", name:"National Portrait Gallery", area:"Trafalgar Square", kind:"Museums & Collections", tags:["indoor","photo spots"], blurb:"Portraits + culture—great central indoor stop.", free:true, time:"1–2h", mapQuery:"National Portrait Gallery London"},
  {id:"courtauld", name:"The Courtauld Gallery", area:"Strand", kind:"Museums & Collections", tags:["indoor","photo spots"], blurb:"Smaller, high-quality art collection in Somerset House.", free:false, time:"1–2h", mapQuery:"Courtauld Gallery"},
  {id:"wallace", name:"Wallace Collection", area:"Marylebone", kind:"Museums & Collections", tags:["indoor","photo spots"], blurb:"Gorgeous galleries + calm vibe—underrated.", free:true, time:"1–2h", mapQuery:"Wallace Collection"},
  {id:"museum_london", name:"Museum of London (check location/updates)", area:"City of London", kind:"Museums & Collections", tags:["indoor","history"], blurb:"London’s story across time—check current venue setup.", free:true, time:"Half-day", mapQuery:"Museum of London"},
  {id:"docklands", name:"Museum of London Docklands", area:"Canary Wharf", kind:"Museums & Collections", tags:["indoor","history"], blurb:"Trade + river history—great and underrated.", free:true, time:"Half-day", mapQuery:"Museum of London Docklands"},
  {id:"tate_britain_more", name:"Tate Britain", area:"Pimlico", kind:"Museums & Collections", tags:["indoor"], blurb:"British art across centuries—often less crowded than Tate Modern.", free:true, time:"1–2h", mapQuery:"Tate Britain"},
  {id:"bank_england", name:"Bank of England Museum", area:"City of London", kind:"Museums & Collections", tags:["indoor","history"], blurb:"Money history + gold bar display—quick and interesting.", free:true, time:"1–2h", mapQuery:"Bank of England Museum"},
  {id:"royal_academy", name:"Royal Academy of Arts", area:"Piccadilly", kind:"Museums & Collections", tags:["indoor","photo spots"], blurb:"Rotating exhibits—check what’s on.", free:false, time:"1–2h", mapQuery:"Royal Academy of Arts"},
  {id:"design_museum_more", name:"Design Museum", area:"Kensington", kind:"Museums & Collections", tags:["indoor"], blurb:"Great for product/branding lovers—check current shows.", free:false, time:"1–2h", mapQuery:"Design Museum London"},
  {id:"horniman", name:"Horniman Museum & Gardens", area:"Forest Hill", kind:"Museums & Collections", tags:["indoor","unusual"], blurb:"Quirky collections + gardens—nice half-day.", free:true, time:"Half-day", mapQuery:"Horniman Museum"},
  {id:"dulwich_gallery", name:"Dulwich Picture Gallery", area:"Dulwich", kind:"Museums & Collections", tags:["indoor"], blurb:"Chill art museum in a leafy area.", free:false, time:"1–2h", mapQuery:"Dulwich Picture Gallery"},
  {id:"maritime", name:"National Maritime Museum", area:"Greenwich", kind:"Museums & Collections", tags:["indoor","history"], blurb:"Maritime stories + great Greenwich pairing.", free:true, time:"Half-day", mapQuery:"National Maritime Museum"},
  {id:"horniman_gardens", name:"Horniman Gardens", area:"Forest Hill", kind:"Parks & Gardens", tags:["walkable","views"], blurb:"Views + greenery—pair with museum.", free:true, time:"1–2h", mapQuery:"Horniman Gardens"},
  {id:"leighton_house_more", name:"Leighton House Museum", area:"Kensington", kind:"Museums & Collections", tags:["indoor","photo spots"], blurb:"Insanely beautiful interiors—hidden gem.", free:false, time:"1–2h", mapQuery:"Leighton House Museum"},

  // ---------------------------
  // PARKS & GARDENS (MORE)
  // ---------------------------
  {id:"kensington_gardens_more", name:"Kensington Gardens", area:"Kensington", kind:"Parks & Gardens", tags:["walkable","photo spots"], blurb:"Pair with Hyde Park + museums.", free:true, time:"Half-day", mapQuery:"Kensington Gardens"},
  {id:"hyde_park_more", name:"Hyde Park", area:"Hyde Park", kind:"Parks & Gardens", tags:["walkable"], blurb:"Classic London park—great reset day.", free:true, time:"Half-day", mapQuery:"Hyde Park"},
  {id:"regents_park_more", name:"Regent’s Park", area:"Regent’s Park", kind:"Parks & Gardens", tags:["walkable","photo spots"], blurb:"Beautiful gardens + long strolling paths.", free:true, time:"Half-day", mapQuery:"Regent's Park"},
  {id:"st_james_more", name:"St James’s Park", area:"Westminster", kind:"Parks & Gardens", tags:["walkable","photo spots"], blurb:"Most ‘royal’ park—great between big landmarks.", free:true, time:"1–2h", mapQuery:"St James's Park"},
  {id:"green_park", name:"Green Park", area:"Mayfair", kind:"Parks & Gardens", tags:["walkable"], blurb:"Leafy shortcut between Buckingham area and Piccadilly.", free:true, time:"Quick", mapQuery:"Green Park London"},
  {id:"victoria_embankment", name:"Victoria Embankment Gardens", area:"Embankment", kind:"Parks & Gardens", tags:["walkable","photo spots"], blurb:"Quick riverside greenery + pretty details.", free:true, time:"Quick", mapQuery:"Victoria Embankment Gardens"},
  {id:"kyoto_garden", name:"Kyoto Garden (Holland Park)", area:"Kensington", kind:"Parks & Gardens", tags:["photo spots","walkable"], blurb:"Japanese garden oasis—super pretty and calm.", free:true, time:"1–2h", mapQuery:"Kyoto Garden Holland Park"},
  {id:"holland_park", name:"Holland Park", area:"Kensington", kind:"Parks & Gardens", tags:["walkable","photo spots"], blurb:"Peacocks + gardens + calm trails.", free:true, time:"1–2h", mapQuery:"Holland Park"},
  {id:"battersea_park", name:"Battersea Park", area:"Battersea", kind:"Parks & Gardens", tags:["walkable"], blurb:"Big park by the river—great for an easy afternoon.", free:true, time:"Half-day", mapQuery:"Battersea Park"},
  {id:"richmond_park_more", name:"Richmond Park (deer spotting)", area:"Richmond", kind:"Parks & Gardens", tags:["walkable","views"], blurb:"Massive park that feels like countryside.", free:true, time:"Half-day", mapQuery:"Richmond Park"},
  {id:"clapham_common", name:"Clapham Common", area:"Clapham", kind:"Parks & Gardens", tags:["walkable"], blurb:"Local London park energy + cafes nearby.", free:true, time:"1–2h", mapQuery:"Clapham Common"},
  {id:"victoria_park", name:"Victoria Park", area:"Hackney", kind:"Parks & Gardens", tags:["walkable"], blurb:"Big east London park—great weekend vibe.", free:true, time:"Half-day", mapQuery:"Victoria Park London"},
  {id:"regents_canal_more", name:"Regent’s Canal (Camden stretch)", area:"Camden", kind:"Walks", tags:["walkable","photo spots"], blurb:"Canal stroll between markets and quieter paths.", free:true, time:"1–2h", mapQuery:"Regent's Canal Camden"},
  {id:"little_venice_more", name:"Little Venice", area:"Paddington", kind:"Walks", tags:["walkable","photo spots"], blurb:"Canal boats + cafes + peaceful stroll.", free:true, time:"1–2h", mapQuery:"Little Venice"},

  // ---------------------------
  // VIEWS (MORE)
  // ---------------------------
  {id:"parliament_hill_more", name:"Parliament Hill (Hampstead Heath)", area:"Hampstead", kind:"Views & Landmarks", tags:["views","walkable","photo spots"], blurb:"Top free skyline viewpoint.", free:true, time:"Half-day", mapQuery:"Parliament Hill"},
  {id:"primrose_more", name:"Primrose Hill", area:"Primrose Hill", kind:"Views & Landmarks", tags:["views","walkable","photo spots"], blurb:"Short climb, big skyline payoff. Sunset is elite.", free:true, time:"1–2h", mapQuery:"Primrose Hill"},
  {id:"alex_palace_more", name:"Alexandra Palace viewpoint", area:"Alexandra Palace", kind:"Views & Landmarks", tags:["views","photo spots"], blurb:"Huge panoramic skyline—great chill half-day.", free:true, time:"Half-day", mapQuery:"Alexandra Palace viewpoint"},
  {id:"greenwich_view", name:"Greenwich Park viewpoint", area:"Greenwich", kind:"Views & Landmarks", tags:["views","walkable","photo spots"], blurb:"Canary Wharf skyline + river bends.", free:true, time:"1–2h", mapQuery:"Greenwich Park viewpoint"},
  {id:"waterloo_bridge_more", name:"Waterloo Bridge (sunset)", area:"South Bank", kind:"Views & Landmarks", tags:["views","photo spots","walkable"], blurb:"One of the best bridge views in London.", free:true, time:"Quick", mapQuery:"Waterloo Bridge"},
  {id:"sky_garden_more", name:"Sky Garden", area:"City of London", kind:"Views & Landmarks", tags:["views","indoor","photo spots"], blurb:"Free indoor viewpoint—book ahead.", free:true, time:"1–2h", mapQuery:"Sky Garden"},
  {id:"one_new_change_more", name:"One New Change Rooftop", area:"City of London", kind:"Views & Landmarks", tags:["views","photo spots"], blurb:"Free St Paul’s dome view—quick win.", free:true, time:"Quick", mapQuery:"One New Change rooftop"},
  {id:"horizon22_more", name:"Horizon 22", area:"City of London", kind:"Views & Landmarks", tags:["views","indoor","photo spots"], blurb:"Free viewpoint when slots are available.", free:true, time:"1–2h", mapQuery:"Horizon 22 London"},
  {id:"shard_more", name:"The View from The Shard", area:"London Bridge", kind:"Views & Landmarks", tags:["views","photo spots"], blurb:"Paid viewpoint—amazing at sunset/night.", free:false, time:"1–2h", mapQuery:"View from The Shard"},
  {id:"london_eye_more", name:"London Eye", area:"South Bank", kind:"Views & Landmarks", tags:["views","photo spots"], blurb:"Touristy but fun if it’s your first time.", free:false, time:"1–2h", mapQuery:"London Eye"},
  {id:"st_pauls_angles", name:"St Paul’s angles (Millennium Bridge + riverside)", area:"City of London", kind:"Views & Landmarks", tags:["views","photo spots","walkable"], blurb:"Walk around for the best dome shots.", free:true, time:"1–2h", mapQuery:"St Paul's Cathedral"},
  {id:"tower_bridge_more", name:"Tower Bridge", area:"Tower Hill", kind:"Views & Landmarks", tags:["views","photo spots","history"], blurb:"Iconic photos both sides of the river.", free:true, time:"1–2h", mapQuery:"Tower Bridge"},
  {id:"southbank_more", name:"South Bank Walk (Waterloo → London Bridge)", area:"South Bank", kind:"Walks", tags:["views","walkable","photo spots"], blurb:"Best skyline walk—snacks + sights nonstop.", free:true, time:"Half-day", mapQuery:"South Bank London"},
  {id:"primrose_sunset", name:"Primrose Hill (sunset picnic)", area:"Primrose Hill", kind:"Views & Landmarks", tags:["views","photo spots"], blurb:"Bring snacks and watch the city glow.", free:true, time:"1–2h", mapQuery:"Primrose Hill sunset"},
  {id:"richmond_hill_more", name:"Richmond Hill View", area:"Richmond", kind:"Views & Landmarks", tags:["views","photo spots"], blurb:"Pretty river views + village vibe.", free:true, time:"1–2h", mapQuery:"Richmond Hill viewpoint"},

  // ---------------------------
  // WALKABLE NEIGHBORHOODS / STREETS (MORE)
  // ---------------------------
  {id:"soho_more", name:"Soho wander + Carnaby Street", area:"Soho", kind:"Walks", tags:["walkable","photo spots"], blurb:"Neon, shops, people-watching—best at night.", free:true, time:"Half-day", mapQuery:"Carnaby Street"},
  {id:"shoreditch_more", name:"Shoreditch street art loop", area:"Shoreditch", kind:"Street Art & Hidden Finds", tags:["walkable","photo spots"], blurb:"Graffiti + indie shops + coffee stops.", free:true, time:"Half-day", mapQuery:"Shoreditch street art"},
  {id:"covent_more", name:"Covent Garden", area:"Covent Garden", kind:"Walks", tags:["walkable","photo spots"], blurb:"Street performers + shops + piazza energy.", free:true, time:"1–2h", mapQuery:"Covent Garden"},
  {id:"notting_more", name:"Notting Hill stroll", area:"Notting Hill", kind:"Walks", tags:["walkable","photo spots"], blurb:"Pastel houses + cute corners—great for photos.", free:true, time:"Half-day", mapQuery:"Notting Hill London"},
  {id:"marylebone_more", name:"Marylebone High Street", area:"Marylebone", kind:"Walks", tags:["walkable"], blurb:"Chic neighborhood with cafés + boutiques.", free:true, time:"1–2h", mapQuery:"Marylebone High Street"},
  {id:"kings_cross_more", name:"King’s Cross & Coal Drops Yard", area:"King’s Cross", kind:"Walks", tags:["walkable","photo spots"], blurb:"Modern design shopping + canalside stroll.", free:true, time:"1–2h", mapQuery:"Coal Drops Yard"},
  {id:"shoreditch_boxpark", name:"Boxpark Shoreditch", area:"Shoreditch", kind:"Games & Experiences", tags:["food","walkable"], blurb:"Container mall vibe—quick browse + bites.", free:true, time:"1–2h", mapQuery:"Boxpark Shoreditch"},
  {id:"leicester_sq", name:"Leicester Square", area:"West End", kind:"Walks", tags:["walkable"], blurb:"Touristy but central—easy link between stops.", free:true, time:"Quick", mapQuery:"Leicester Square"},
  {id:"piccadilly", name:"Piccadilly Circus", area:"West End", kind:"Views & Landmarks", tags:["walkable","photo spots"], blurb:"Classic neon London moment.", free:true, time:"Quick", mapQuery:"Piccadilly Circus"},
  {id:"trafalgar_more", name:"Trafalgar Square", area:"Trafalgar Square", kind:"Views & Landmarks", tags:["walkable","photo spots"], blurb:"Central landmark—pair with National Gallery.", free:true, time:"Quick", mapQuery:"Trafalgar Square"},
  {id:"south_kens_more", name:"South Kensington museum quarter", area:"South Kensington", kind:"Walks", tags:["walkable","indoor"], blurb:"V&A + Natural History + Science Museum in one zone.", free:true, time:"Half-day", mapQuery:"South Kensington museums"},
  {id:"paddington_basin", name:"Paddington Basin canalside", area:"Paddington", kind:"Walks", tags:["walkable","photo spots"], blurb:"Modern canalside walk with cafés + bridges.", free:true, time:"1–2h", mapQuery:"Paddington Basin"},
  {id:"london_fields", name:"London Fields + Broadway Market area", area:"Hackney", kind:"Walks", tags:["walkable"], blurb:"East London weekend vibe—great for a casual loop.", free:true, time:"Half-day", mapQuery:"London Fields"},
  {id:"shoreditch_high_st", name:"Shoreditch High Street stroll", area:"Shoreditch", kind:"Walks", tags:["walkable"], blurb:"Vintage shops + coffee + street art side streets.", free:true, time:"Half-day", mapQuery:"Shoreditch High Street"},
  {id:"chinatown_walk", name:"Chinatown wander", area:"Chinatown", kind:"Walks", tags:["walkable","food","photo spots"], blurb:"Lantern streets + snack stops—especially at night.", free:true, time:"1–2h", mapQuery:"Chinatown London"},

  // ---------------------------
  // HISTORY / ICONIC LANDMARKS (MORE)
  // ---------------------------
  {id:"buckingham_more", name:"Buckingham Palace (front gates)", area:"Westminster", kind:"Views & Landmarks", tags:["history","photo spots","walkable"], blurb:"Quick iconic stop—pair with St James’s Park.", free:true, time:"Quick", mapQuery:"Buckingham Palace"},
  {id:"big_ben_more", name:"Big Ben + Parliament", area:"Westminster", kind:"Views & Landmarks", tags:["history","photo spots","walkable"], blurb:"Iconic London—best angles from Westminster Bridge.", free:true, time:"Quick", mapQuery:"Big Ben"},
  {id:"westminster_bridge", name:"Westminster Bridge", area:"Westminster", kind:"Views & Landmarks", tags:["views","photo spots","walkable"], blurb:"Great skyline shots (Eye + Big Ben).", free:true, time:"Quick", mapQuery:"Westminster Bridge"},
  {id:"st_pauls_more", name:"St Paul’s Cathedral area", area:"City of London", kind:"Views & Landmarks", tags:["history","photo spots"], blurb:"Even outside, the dome views are elite.", free:true, time:"1–2h", mapQuery:"St Paul's Cathedral"},
  {id:"millennium_more", name:"Millennium Bridge", area:"City of London", kind:"Architecture & Streets", tags:["photo spots","walkable","views"], blurb:"Best St Paul’s framing to Tate Modern.", free:true, time:"Quick", mapQuery:"Millennium Bridge"},
  {id:"tower_london_more", name:"Tower of London (exterior + riverwalk)", area:"Tower Hill", kind:"History & Ruins", tags:["history","walkable"], blurb:"Iconic fortress vibe along the Thames.", free:true, time:"1–2h", mapQuery:"Tower of London"},
  {id:"kensington_palace", name:"Kensington Palace (grounds)", area:"Kensington", kind:"History & Ruins", tags:["history","walkable","photo spots"], blurb:"Royal park area—nice pairing with gardens.", free:true, time:"1–2h", mapQuery:"Kensington Palace"},
  {id:"royal_mews", name:"Royal Mews (check entry)", area:"Westminster", kind:"History & Ruins", tags:["history"], blurb:"Royal carriages + horses—if you like royal details.", free:false, time:"1–2h", mapQuery:"Royal Mews London"},
  {id:"monument_more", name:"The Monument (Great Fire)", area:"City of London", kind:"Views & Landmarks", tags:["history","views"], blurb:"Historic marker—climb for views (paid).", free:false, time:"1–2h", mapQuery:"The Monument London"},
  {id:"temple_church_more", name:"Temple Church", area:"Temple", kind:"History & Ruins", tags:["history","indoor"], blurb:"Knights Templar vibes + calm interior.", free:false, time:"Quick", mapQuery:"Temple Church London"},
  {id:"inns_more", name:"Inns of Court (Inner & Middle Temple)", area:"Temple", kind:"Architecture & Streets", tags:["history","walkable","photo spots"], blurb:"Hidden courtyards + peaceful lanes.", free:true, time:"1–2h", mapQuery:"Inner Temple London"},
  {id:"charterhouse_more", name:"The Charterhouse", area:"Farringdon", kind:"History & Ruins", tags:["history","unusual"], blurb:"Hidden historic complex—check tour times.", free:false, time:"1–2h", mapQuery:"The Charterhouse London"},
  {id:"old_op_theatre", name:"Old Operating Theatre Museum", area:"London Bridge", kind:"Museums & Collections", tags:["history","unusual","indoor"], blurb:"Historic surgery theatre—if you can handle the cringe.", free:false, time:"1–2h", mapQuery:"Old Operating Theatre Museum"},
  {id:"cutty_sark_more", name:"Cutty Sark", area:"Greenwich", kind:"Museums & Collections", tags:["history","indoor"], blurb:"Historic ship—Greenwich day-trip staple.", free:false, time:"1–2h", mapQuery:"Cutty Sark"},
  {id:"greenwich_more", name:"Greenwich Park + Meridian area", area:"Greenwich", kind:"Parks & Gardens", tags:["history","views","walkable"], blurb:"One of the best full-day neighborhood loops.", free:true, time:"Half-day", mapQuery:"Greenwich Park"},
// ✅ MORE PACK (Part 2): paste these INSIDE your existing const PLACES = [ ... ] array.
// Tip: put them after the last item you pasted. Make sure there’s a comma between items.

  // ---------------------------
  // UNUSUAL / WEIRD / HIDDEN (MORE)
  // ---------------------------
  {id:"freemasons_hall", name:"Freemasons’ Hall (Art Deco interior)", area:"Holborn", kind:"Museums & Collections", tags:["unusual","indoor","photo spots"], blurb:"Massive Art Deco building—looks like a movie set.", free:false, time:"1–2h", mapQuery:"Freemasons' Hall London"},
  {id:"leighton_house_extra", name:"Leighton House (Arab Hall)", area:"Kensington", kind:"Museums & Collections", tags:["unusual","indoor","photo spots"], blurb:"Insane tiles + interiors. Total hidden gem.", free:false, time:"1–2h", mapQuery:"Leighton House Museum"},
  {id:"grant_museum", name:"Grant Museum of Zoology", area:"Bloomsbury", kind:"Museums & Collections", tags:["unusual","indoor"], blurb:"Tiny museum packed with animal specimens (quirky!).", free:true, time:"1–2h", mapQuery:"Grant Museum of Zoology"},
  {id:"petrie", name:"Petrie Museum of Egyptian Archaeology", area:"Bloomsbury", kind:"Museums & Collections", tags:["unusual","indoor","history"], blurb:"Small but fascinating—real ‘hidden museum’ energy.", free:true, time:"1–2h", mapQuery:"Petrie Museum"},
  {id:"seven_dials_sundial", name:"Seven Dials (historic junction)", area:"Covent Garden", kind:"Street Art & Hidden Finds", tags:["unusual","walkable","photo spots"], blurb:"Cute intersection + quick photos + nearby food.", free:true, time:"Quick", mapQuery:"Seven Dials London"},
  {id:"bleeding_heart_yard", name:"Bleeding Heart Yard", area:"Farringdon", kind:"Architecture & Streets", tags:["unusual","walkable","photo spots"], blurb:"Tiny courtyard with a wild name + cozy vibe.", free:true, time:"Quick", mapQuery:"Bleeding Heart Yard"},
  {id:"st_brides_crypt", name:"St Bride’s Church (crypt + history)", area:"Fleet Street", kind:"History & Ruins", tags:["unusual","history","indoor"], blurb:"Fleet Street history + quiet corners.", free:true, time:"1–2h", mapQuery:"St Bride's Church London"},
  {id:"st_bartholomew", name:"St Bartholomew-the-Great", area:"Smithfield", kind:"History & Ruins", tags:["unusual","history","photo spots"], blurb:"One of London’s oldest churches—feels medieval.", free:false, time:"1–2h", mapQuery:"St Bartholomew the Great"},
  {id:"smithfield_market", name:"Smithfield Market (architecture)", area:"Farringdon", kind:"Architecture & Streets", tags:["unusual","photo spots"], blurb:"Victorian market buildings—cool photos early.", free:true, time:"Quick", mapQuery:"Smithfield Market London"},
  {id:"barbican_conservatory", name:"Barbican Conservatory (when open)", area:"Barbican", kind:"Parks & Gardens", tags:["unusual","indoor","photo spots"], blurb:"Indoor tropical plants inside brutalist London.", free:true, time:"1–2h", mapQuery:"Barbican Conservatory"},
  {id:"barbican", name:"Barbican Estate (brutalist wander)", area:"Barbican", kind:"Walks", tags:["unusual","photo spots","walkable"], blurb:"Concrete maze + fountains + cinematic angles.", free:true, time:"1–2h", mapQuery:"Barbican Estate"},
  {id:"little_ben", name:"Little Ben", area:"Victoria", kind:"Street Art & Hidden Finds", tags:["unusual","photo spots","walkable"], blurb:"Mini Big Ben—quick fun photo stop.", free:true, time:"Quick", mapQuery:"Little Ben London"},
  {id:"highgate_hill", name:"Highgate Village wander", area:"Highgate", kind:"Walks", tags:["unusual","walkable"], blurb:"Old village feel + cozy pubs + cemetery nearby.", free:true, time:"Half-day", mapQuery:"Highgate Village"},
  {id:"epping_forest", name:"Epping Forest (edge-of-London nature)", area:"Epping", kind:"Parks & Gardens", tags:["unusual","walkable"], blurb:"Feels like you escaped the city.", free:true, time:"Half-day", mapQuery:"Epping Forest"},
  {id:"daunt_books", name:"Daunt Books (Marylebone)", area:"Marylebone", kind:"Museums & Collections", tags:["unusual","photo spots","indoor"], blurb:"Iconic bookstore interior—travel section is elite.", free:true, time:"Quick", mapQuery:"Daunt Books Marylebone"},
  {id:"goodwin_lane_alt", name:"Neal’s Passage + hidden lanes", area:"Covent Garden", kind:"Architecture & Streets", tags:["unusual","walkable","photo spots"], blurb:"Tiny passages around Neal’s Yard—good for exploring.", free:true, time:"Quick", mapQuery:"Neal's Yard London"},
  {id:"eagle_pub", name:"The Eagle (Clerkenwell)", area:"Clerkenwell", kind:"Food & Drink", tags:["unusual","food"], blurb:"Modern gastropub classic—great vibe.", free:false, time:"1–2h", mapQuery:"The Eagle Clerkenwell"},
  {id:"columbia_sunday_loop", name:"Columbia Road Sunday loop (flowers + cafés)", area:"Bethnal Green", kind:"Walks", tags:["unusual","photo spots","walkable"], blurb:"Flowers + vintage + street art nearby.", free:true, time:"Half-day", mapQuery:"Columbia Road Flower Market"},
  {id:"camden_cemetery", name:"St Pancras Gardens (quiet & pretty)", area:"King's Cross", kind:"Parks & Gardens", tags:["unusual","walkable"], blurb:"Calm green space near busy stations.", free:true, time:"Quick", mapQuery:"St Pancras Gardens"},
  {id:"kensal_green", name:"Kensal Green Cemetery", area:"Kensal Green", kind:"History & Ruins", tags:["unusual","history"], blurb:"Historic cemetery—quiet and atmospheric.", free:true, time:"1–2h", mapQuery:"Kensal Green Cemetery"},
  {id:"little_portugal", name:"Little Portugal (Stockwell)", area:"Stockwell", kind:"Food & Drink", tags:["unusual","food"], blurb:"Portuguese cafés + bakeries—local gem area.", free:false, time:"1–2h", mapQuery:"Stockwell Portuguese cafes"},

  // ---------------------------
  // FOOD & DRINK (EVEN MORE)
  // ---------------------------
  {id:"ottolenghi", name:"Ottolenghi (Notting Hill)", area:"Notting Hill", kind:"Food & Drink", tags:["food","photo spots"], blurb:"Beautiful pastries + salads—great lunch.", free:false, time:"1–2h", mapQuery:"Ottolenghi Notting Hill"},
  {id:"the_ledbury", name:"The Ledbury", area:"Notting Hill", kind:"Food & Drink", tags:["food"], blurb:"High-end dining (book ahead).", free:false, time:"2h+", mapQuery:"The Ledbury London"},
  {id:"dim_sum_duck", name:"Duck Duck Goose (Chinatown dim sum)", area:"Chinatown", kind:"Food & Drink", tags:["food","walkable"], blurb:"Dim sum / Cantonese comfort in the center.", free:false, time:"1–2h", mapQuery:"Chinatown London dim sum"},
  {id:"barrafina", name:"Barrafina (Soho)", area:"Soho", kind:"Food & Drink", tags:["food"], blurb:"Tapas counter—great quality and vibe.", free:false, time:"1–2h", mapQuery:"Barrafina Soho"},
  {id:"hakkasan", name:"Hakkasan (Hanway Place)", area:"Fitzrovia", kind:"Food & Drink", tags:["food"], blurb:"Upscale Chinese—night-out energy.", free:false, time:"2h+", mapQuery:"Hakkasan Hanway Place"},
  {id:"rules", name:"Rules (historic restaurant)", area:"Covent Garden", kind:"Food & Drink", tags:["food","history"], blurb:"Old-school British dining—classic London.", free:false, time:"2h+", mapQuery:"Rules Restaurant London"},
  {id:"the_savoy", name:"The Savoy (drink/tea vibe)", area:"Strand", kind:"Food & Drink", tags:["food","photo spots"], blurb:"Classic luxury London moment.", free:false, time:"2h+", mapQuery:"Savoy London afternoon tea"},
  {id:"franzos", name:"The Spanish Bookshop + café stop", area:"South Kensington", kind:"Food & Drink", tags:["food","walkable"], blurb:"Cute stop if you’re in museum land.", free:false, time:"Quick", mapQuery:"South Kensington cafes"},
  {id:"mamusca", name:"Mamuska! Polish Kitchen & Bar", area:"Waterloo", kind:"Food & Drink", tags:["food","walkable"], blurb:"Pierogi + comfort food near South Bank.", free:false, time:"1–2h", mapQuery:"Mamuska Waterloo"},
  {id:"gordon_winebar", name:"Gordon’s Wine Bar", area:"Embankment", kind:"Food & Drink", tags:["food","unusual"], blurb:"Candlelit cave vibes—super classic.", free:false, time:"1–2h", mapQuery:"Gordon's Wine Bar"},
  {id:"yeast_bakery", name:"Arôme Bakery (Covent Garden)", area:"Covent Garden", kind:"Food & Drink", tags:["food","walkable"], blurb:"Pastries + coffee—perfect mid-walk.", free:false, time:"Quick", mapQuery:"Arome Bakery London"},
  {id:"bread_ahead", name:"Bread Ahead Bakery (Borough)", area:"Borough", kind:"Food & Drink", tags:["food","walkable"], blurb:"Donuts + pastries near the market.", free:false, time:"Quick", mapQuery:"Bread Ahead Borough Market"},
  {id:"patisserie_cedric", name:"Cédric Grolet at The Berkeley (window dessert)", area:"Knightsbridge", kind:"Food & Drink", tags:["food","photo spots"], blurb:"Pretty desserts—very viral.", free:false, time:"Quick", mapQuery:"Cedric Grolet The Berkeley"},
  {id:"theivydishes", name:"Dishoom-style breakfast: Regency Café", area:"Westminster", kind:"Food & Drink", tags:["food","walkable"], blurb:"Old-school café fry-up vibe.", free:false, time:"1–2h", mapQuery:"Regency Cafe London"},
  {id:"pie_mash", name:"Manze’s Pie & Mash", area:"Southwark", kind:"Food & Drink", tags:["food","history"], blurb:"Classic London comfort food tradition.", free:false, time:"1–2h", mapQuery:"Manze's Pie and Mash"},
  {id:"brick_lane_curry", name:"Brick Lane curry crawl", area:"Brick Lane", kind:"Food & Drink", tags:["food","walkable"], blurb:"Choose 1–2 spots and snack your way along.", free:false, time:"1–2h", mapQuery:"Brick Lane curry"},
  {id:"monday_market", name:"Flat White Coffee (Soho)", area:"Soho", kind:"Food & Drink", tags:["food","walkable"], blurb:"Classic coffee stop while you wander.", free:false, time:"Quick", mapQuery:"Flat White Soho"},
  {id:"kings_cross_foodhall", name:"King’s Cross: Granary Square food stops", area:"King’s Cross", kind:"Food & Drink", tags:["food","walkable"], blurb:"Grab food and sit by the fountains.", free:false, time:"1–2h", mapQuery:"Granary Square King's Cross"},
  {id:"borough_bar", name:"The Market Porter (pub by Borough)", area:"Borough", kind:"Food & Drink", tags:["food","walkable"], blurb:"Classic pub stop right next to Borough Market.", free:false, time:"1–2h", mapQuery:"Market Porter Borough Market"},
  {id:"wapping_pub", name:"The Prospect of Whitby", area:"Wapping", kind:"Food & Drink", tags:["food","history","views"], blurb:"Riverside pub with old London vibes.", free:false, time:"1–2h", mapQuery:"Prospect of Whitby"},
  {id:"chelsea_buns", name:"Chelsea Bun House", area:"Chelsea", kind:"Food & Drink", tags:["food"], blurb:"Sweet treat stop in a cute area.", free:false, time:"Quick", mapQuery:"Chelsea Bun House"},
  {id:"pimlico_bakery", name:"Pimlico: Café hop", area:"Pimlico", kind:"Food & Drink", tags:["food","walkable"], blurb:"Quiet central-ish neighborhood with cozy cafés.", free:false, time:"1–2h", mapQuery:"Pimlico cafes"},
  {id:"brixton_village", name:"Brixton Village (food courts)", area:"Brixton", kind:"Food & Drink", tags:["food","unusual"], blurb:"Amazing variety—big local energy.", free:true, time:"Half-day", mapQuery:"Brixton Village"},
  {id:"popbrixton", name:"Pop Brixton", area:"Brixton", kind:"Food & Drink", tags:["food","unusual"], blurb:"Container village with food + drinks.", free:true, time:"1–2h", mapQuery:"Pop Brixton"},
  {id:"coal_drops_eat", name:"Coal Drops Yard bites", area:"King’s Cross", kind:"Food & Drink", tags:["food","walkable"], blurb:"Grab food and keep wandering the canals.", free:false, time:"1–2h", mapQuery:"Coal Drops Yard restaurants"},
  {id:"spitalfields_drinks", name:"Spitalfields bars (night vibe)", area:"Spitalfields", kind:"Food & Drink", tags:["food","night"], blurb:"Great pre-night-out area with options.", free:false, time:"2h+", mapQuery:"Spitalfields bars"},
  {id:"shoreditch_cocktails", name:"Shoreditch cocktail crawl", area:"Shoreditch", kind:"Food & Drink", tags:["food","night"], blurb:"Pick 2–3 bars and vibe out.", free:false, time:"2h+", mapQuery:"Shoreditch cocktails"},
  {id:"mayfair_cafes", name:"Mayfair café stroll", area:"Mayfair", kind:"Food & Drink", tags:["food","walkable"], blurb:"Chic coffee stops between shopping.", free:false, time:"1–2h", mapQuery:"Mayfair cafes"},
  {id:"covent_dessert", name:"Covent Garden dessert loop", area:"Covent Garden", kind:"Food & Drink", tags:["food","walkable"], blurb:"Grab something sweet and keep exploring.", free:false, time:"1–2h", mapQuery:"Covent Garden desserts"},

  // ---------------------------
  // MARKETS (EVEN MORE)
  // ---------------------------
  {id:"portobello_alt", name:"Portobello Road Market (best early hours)", area:"Notting Hill", kind:"Markets", tags:["walkable","photo spots"], blurb:"Go early to browse with fewer crowds.", free:true, time:"Half-day", mapQuery:"Portobello Road Market"},
  {id:"camden_market_more2", name:"Camden Market (food courts + stalls)", area:"Camden", kind:"Markets", tags:["food","walkable"], blurb:"Massive—plan time and snack a lot.", free:true, time:"Half-day", mapQuery:"Camden Market"},
  {id:"borough_market_more2", name:"Borough Market (second lap)", area:"Borough", kind:"Markets", tags:["food"], blurb:"So many vendors—go twice if you love food.", free:true, time:"1–2h", mapQuery:"Borough Market"},
  {id:"spitalfields_more2", name:"Old Spitalfields Market (shopping day)", area:"Spitalfields", kind:"Markets", tags:["walkable","food"], blurb:"Stalls + shops + easy Shoreditch loop.", free:true, time:"1–2h", mapQuery:"Old Spitalfields Market"},
  {id:"greenwich_more2", name:"Greenwich Market (craft stalls)", area:"Greenwich", kind:"Markets", tags:["walkable"], blurb:"Cute crafts + snacks—pair with park views.", free:true, time:"1–2h", mapQuery:"Greenwich Market"},
  {id:"columbia_more2", name:"Columbia Road Flower Market", area:"Bethnal Green", kind:"Markets", tags:["photo spots","walkable"], blurb:"Sunday-only flower chaos (in the best way).", free:true, time:"1–2h", mapQuery:"Columbia Road Flower Market"},
  {id:"broadway_more2", name:"Broadway Market (Hackney)", area:"Hackney", kind:"Markets", tags:["food","walkable"], blurb:"Weekend market + cute neighborhood stroll.", free:true, time:"1–2h", mapQuery:"Broadway Market London"},
  {id:"camden_lock_more2", name:"Camden Lock Market", area:"Camden", kind:"Markets", tags:["walkable","photo spots"], blurb:"Locks + stalls + canal walk connections.", free:true, time:"1–2h", mapQuery:"Camden Lock Market"},
  {id:"old_truman", name:"Old Truman Brewery markets (weekends)", area:"Brick Lane", kind:"Markets", tags:["unusual","walkable"], blurb:"Vintage/markets/events depend on the day—worth checking.", free:true, time:"Half-day", mapQuery:"Old Truman Brewery market"},
  {id:"southbank_market_more2", name:"Southbank Centre Food Market", area:"South Bank", kind:"Markets", tags:["food","views","walkable"], blurb:"Weekend snack stop on your river walk.", free:true, time:"1–2h", mapQuery:"Southbank Centre Food Market"},
  {id:"camberwell_market", name:"Camberwell Green Market", area:"Camberwell", kind:"Markets", tags:["walkable"], blurb:"Local market vibe away from tourist zones.", free:true, time:"1–2h", mapQuery:"Camberwell Green Market"},
  {id:"marylebone_market", name:"Marylebone Farmers’ Market (Sun)", area:"Marylebone", kind:"Markets", tags:["food","walkable"], blurb:"Sunday local produce + cute area stroll.", free:true, time:"1–2h", mapQuery:"Marylebone Farmers' Market"},

  // ---------------------------
  // MUSEUMS & COLLECTIONS (MORE)
  // ---------------------------
  {id:"victoria_albert_repeat", name:"V&A (go twice if you love design)", area:"South Kensington", kind:"Museums & Collections", tags:["indoor"], blurb:"So huge you can’t do it all in one visit.", free:true, time:"Half-day", mapQuery:"Victoria and Albert Museum"},
  {id:"tate_modern_repeat", name:"Tate Modern (viewing level + galleries)", area:"Bankside", kind:"Museums & Collections", tags:["indoor","views"], blurb:"Art + skyline. Great rainy-day plan.", free:true, time:"Half-day", mapQuery:"Tate Modern"},
  {id:"saatchi", name:"Saatchi Gallery", area:"Chelsea", kind:"Museums & Collections", tags:["indoor","photo spots"], blurb:"Modern art exhibitions—check what’s on.", free:true, time:"1–2h", mapQuery:"Saatchi Gallery"},
  {id:"photographers_gallery", name:"The Photographers’ Gallery", area:"Soho", kind:"Museums & Collections", tags:["indoor","photo spots"], blurb:"Photography exhibits + gift shop.", free:false, time:"1–2h", mapQuery:"The Photographers' Gallery London"},
  {id:"royal_mews_museum", name:"Royal Mews", area:"Westminster", kind:"Museums & Collections", tags:["indoor","history"], blurb:"Royal carriages + stables. Check opening times.", free:false, time:"1–2h", mapQuery:"Royal Mews"},
  {id:"london_transport", name:"London Transport Museum", area:"Covent Garden", kind:"Museums & Collections", tags:["indoor","history"], blurb:"Design + transit history—very London.", free:false, time:"1–2h", mapQuery:"London Transport Museum"},
  {id:"tate_britain_river", name:"Tate Britain + riverside stroll", area:"Pimlico", kind:"Museums & Collections", tags:["indoor","walkable"], blurb:"Pair with a Thames walk afterward.", free:true, time:"Half-day", mapQuery:"Tate Britain"},
  {id:"maritime_more2", name:"National Maritime Museum", area:"Greenwich", kind:"Museums & Collections", tags:["indoor","history"], blurb:"Great Greenwich day plan indoors.", free:true, time:"Half-day", mapQuery:"National Maritime Museum"},
  {id:"bank_museum_more2", name:"Bank of England Museum", area:"City of London", kind:"Museums & Collections", tags:["indoor","history"], blurb:"Quick, interesting, and free.", free:true, time:"1–2h", mapQuery:"Bank of England Museum"},
  {id:"wellcome_collection", name:"Wellcome Collection", area:"Euston", kind:"Museums & Collections", tags:["indoor","unusual"], blurb:"Medicine/culture exhibits—quirky and smart.", free:true, time:"1–2h", mapQuery:"Wellcome Collection"},
  {id:"two_temple_place", name:"Two Temple Place (seasonal exhibits)", area:"Temple", kind:"Museums & Collections", tags:["indoor","photo spots"], blurb:"Stunning building—exhibits vary by season.", free:false, time:"1–2h", mapQuery:"Two Temple Place"},
  {id:"royal_observatory", name:"Royal Observatory Greenwich", area:"Greenwich", kind:"Museums & Collections", tags:["history","views"], blurb:"Prime Meridian + views—classic day trip.", free:false, time:"Half-day", mapQuery:"Royal Observatory Greenwich"},
  {id:"cutty_sark_repeat", name:"Cutty Sark (ship museum)", area:"Greenwich", kind:"Museums & Collections", tags:["indoor","history"], blurb:"Historic ship—pair with market + park.", free:false, time:"1–2h", mapQuery:"Cutty Sark"},
  {id:"british_library", name:"The British Library (Treasures Gallery)", area:"King’s Cross", kind:"Museums & Collections", tags:["indoor","history"], blurb:"See incredible manuscripts + calm indoor time.", free:true, time:"1–2h", mapQuery:"British Library Treasures Gallery"},
  {id:"household_cavalry", name:"Household Cavalry Museum", area:"Whitehall", kind:"Museums & Collections", tags:["indoor","history"], blurb:"Royal guard history—right by big landmarks.", free:false, time:"1–2h", mapQuery:"Household Cavalry Museum"},
  {id:"leighton_house_repeat", name:"Leighton House (repeat worthy)", area:"Kensington", kind:"Museums & Collections", tags:["indoor","photo spots"], blurb:"So photogenic you’ll want more time.", free:false, time:"1–2h", mapQuery:"Leighton House Museum"},

  // ---------------------------
  // PARKS & GARDENS (MORE)
  // ---------------------------
  {id:"hampstead_heath", name:"Hampstead Heath (full wander)", area:"Hampstead", kind:"Parks & Gardens", tags:["walkable","views"], blurb:"Big nature escape inside the city.", free:true, time:"Half-day", mapQuery:"Hampstead Heath"},
  {id:"greenwich_park", name:"Greenwich Park", area:"Greenwich", kind:"Parks & Gardens", tags:["walkable","views"], blurb:"Best views over Canary Wharf.", free:true, time:"Half-day", mapQuery:"Greenwich Park"},
  {id:"canal_walk_kx", name:"King’s Cross canal loop", area:"King’s Cross", kind:"Walks", tags:["walkable","photo spots"], blurb:"Canal paths + bridges + fountains.", free:true, time:"1–2h", mapQuery:"Granary Square fountains"},
  {id:"primrose_walk", name:"Primrose Hill + Regent’s Park loop", area:"Primrose Hill", kind:"Walks", tags:["walkable","views"], blurb:"Combine a skyline moment with a park wander.", free:true, time:"Half-day", mapQuery:"Primrose Hill"},
  {id:"battersea_power", name:"Battersea Power Station riverside", area:"Battersea", kind:"Walks", tags:["walkable","photo spots"], blurb:"Modern riverside development + great photos.", free:true, time:"1–2h", mapQuery:"Battersea Power Station"},
  {id:"thames_path", name:"Thames Path (pick a stretch)", area:"Multiple", kind:"Walks", tags:["walkable","views"], blurb:"Walk along the river anywhere—always a win.", free:true, time:"Half-day", mapQuery:"Thames Path London"},
  {id:"kew_more2", name:"Kew Gardens", area:"Kew", kind:"Parks & Gardens", tags:["photo spots"], blurb:"Plant heaven—glasshouses are amazing.", free:false, time:"Half-day", mapQuery:"Kew Gardens"},
  {id:"richmond_riverside", name:"Richmond riverside stroll", area:"Richmond", kind:"Walks", tags:["walkable","views"], blurb:"Pretty river views + village vibe.", free:true, time:"1–2h", mapQuery:"Richmond Riverside"},
  {id:"st_katharine_docks", name:"St Katharine Docks", area:"Tower Hill", kind:"Walks", tags:["walkable","photo spots"], blurb:"Marina vibes near Tower Bridge—cute and calm.", free:true, time:"1–2h", mapQuery:"St Katharine Docks"},
  {id:"chelsea_physic", name:"Chelsea Physic Garden", area:"Chelsea", kind:"Parks & Gardens", tags:["photo spots","unusual"], blurb:"Historic plant garden—quiet and pretty.", free:false, time:"1–2h", mapQuery:"Chelsea Physic Garden"},
  {id:"regents_rose", name:"Queen Mary’s Rose Gardens (Regent’s Park)", area:"Regent’s Park", kind:"Parks & Gardens", tags:["photo spots","walkable"], blurb:"Peak pretty when in bloom.", free:true, time:"1–2h", mapQuery:"Queen Mary's Gardens Regent's Park"},
  {id:"isabella_plant", name:"Isabella Plantation (Richmond Park)", area:"Richmond", kind:"Parks & Gardens", tags:["walkable","photo spots"], blurb:"Hidden garden inside Richmond Park.", free:true, time:"1–2h", mapQuery:"Isabella Plantation"},
  {id:"little_venice_to_camden", name:"Little Venice → Camden (longer canal walk)", area:"West & North London", kind:"Walks", tags:["walkable","photo spots"], blurb:"Long scenic canal route if you want steps.", free:true, time:"Half-day", mapQuery:"Little Venice to Camden canal walk"},

  // ---------------------------
  // VIEWS (MORE)
  // ---------------------------
  {id:"garden_120", name:"Garden at 120 (rooftop)", area:"City of London", kind:"Views & Landmarks", tags:["views","photo spots"], blurb:"Free rooftop garden option when open.", free:true, time:"1–2h", mapQuery:"Garden at 120"},
  {id:"st_pauls_river", name:"St Paul’s from South Bank angle", area:"Bankside", kind:"Views & Landmarks", tags:["views","photo spots"], blurb:"Best dome framing—walk and explore angles.", free:true, time:"1–2h", mapQuery:"St Paul's view from South Bank"},
  {id:"tower_bridge_night", name:"Tower Bridge at night", area:"Tower Hill", kind:"Views & Landmarks", tags:["views","photo spots"], blurb:"Night lights + reflections—so pretty.", free:true, time:"Quick", mapQuery:"Tower Bridge night"},
  {id:"southbank_night", name:"South Bank at night (London Eye glow)", area:"South Bank", kind:"Views & Landmarks", tags:["views","photo spots"], blurb:"Night skyline stroll—great photos.", free:true, time:"1–2h", mapQuery:"South Bank London night"},
  {id:"primrose_morning", name:"Primrose Hill sunrise", area:"Primrose Hill", kind:"Views & Landmarks", tags:["views","photo spots"], blurb:"Early = fewer people and dreamy light.", free:true, time:"1–2h", mapQuery:"Primrose Hill sunrise"},
  {id:"parliament_hill_sunset", name:"Parliament Hill sunset", area:"Hampstead", kind:"Views & Landmarks", tags:["views","photo spots"], blurb:"Bring snacks and watch the city change.", free:true, time:"1–2h", mapQuery:"Parliament Hill sunset"},

  // ---------------------------
  // WALKABLE / PHOTO SPOTS (MORE)
  // ---------------------------
  {id:"shad_thames_more2", name:"Shad Thames (warehouse lanes)", area:"Shad Thames", kind:"Architecture & Streets", tags:["photo spots","walkable"], blurb:"Moody brick lanes near Tower Bridge—cinematic.", free:true, time:"1–2h", mapQuery:"Shad Thames"},
  {id:"leicester_square_more2", name:"Leicester Square (quick stop)", area:"West End", kind:"Walks", tags:["walkable"], blurb:"Touristy but central; connects everything.", free:true, time:"Quick", mapQuery:"Leicester Square"},
  {id:"covent_lanes", name:"Covent Garden side streets", area:"Covent Garden", kind:"Architecture & Streets", tags:["photo spots","walkable"], blurb:"Small lanes with cute storefronts + quick photos.", free:true, time:"1–2h", mapQuery:"Covent Garden London"},
  {id:"soho_lanes", name:"Soho hidden lanes", area:"Soho", kind:"Architecture & Streets", tags:["photo spots","walkable"], blurb:"Neon corners + tiny alleys—wander and vibe.", free:true, time:"1–2h", mapQuery:"Soho London"},
  {id:"notting_hill_photos", name:"Notting Hill photo loop (doors + mews)", area:"Notting Hill", kind:"Walks", tags:["photo spots","walkable"], blurb:"Pastel doors + quiet mews streets.", free:true, time:"Half-day", mapQuery:"Notting Hill mews"},
  {id:"kensington_mews", name:"Kensington mews streets", area:"Kensington", kind:"Architecture & Streets", tags:["photo spots","walkable"], blurb:"Cobblestone mews lanes—super cute.", free:true, time:"1–2h", mapQuery:"Kensington mews"},
  {id:"abbey_road", name:"Abbey Road Crossing", area:"St John’s Wood", kind:"Architecture & Streets", tags:["photo spots"], blurb:"Beatles moment—go early for fewer crowds.", free:true, time:"Quick", mapQuery:"Abbey Road Crossing"},
  {id:"regent_street", name:"Regent Street (shopping + lights)", area:"West End", kind:"Walks", tags:["walkable","photo spots"], blurb:"Big London shopping street—fun to walk.", free:true, time:"1–2h", mapQuery:"Regent Street London"},
  {id:"oxford_street", name:"Oxford Street (shopping)", area:"West End", kind:"Walks", tags:["walkable"], blurb:"Busy but central if you’re shopping.", free:true, time:"1–2h", mapQuery:"Oxford Street London"},
  {id:"carnaby", name:"Carnaby Street", area:"Soho", kind:"Walks", tags:["photo spots","walkable"], blurb:"Cute pedestrian shopping street—great photos.", free:true, time:"1–2h", mapQuery:"Carnaby Street"},
  {id:"harry_potter_platform", name:"King’s Cross Platform 9¾ (quick photo)", area:"King’s Cross", kind:"Photo Spots", tags:["photo spots"], blurb:"Touristy but fun if you’re nearby.", free:true, time:"Quick", mapQuery:"Platform 9 3/4 King's Cross"},
  {id:"tower_hill_river", name:"Tower Hill riverwalk", area:"Tower Hill", kind:"Walks", tags:["views","walkable"], blurb:"Easy scenic walk between Tower Bridge and the City.", free:true, time:"1–2h", mapQuery:"Tower Hill river walk"},
  {id:"canary_wharf_more2", name:"Canary Wharf skyline loop", area:"Canary Wharf", kind:"Walks", tags:["views","walkable"], blurb:"Modern London contrast—quick and clean.", free:true, time:"1–2h", mapQuery:"Canary Wharf"},
  {id:"shoreditch_vintage", name:"Shoreditch vintage shops", area:"Shoreditch", kind:"Walks", tags:["walkable"], blurb:"Thrift + street art + coffee stops.", free:true, time:"Half-day", mapQuery:"Shoreditch vintage shops"},
  {id:"brick_lane_art_more2", name:"Brick Lane street art alleys", area:"Brick Lane", kind:"Street Art & Hidden Finds", tags:["photo spots","walkable"], blurb:"Best graffiti lanes—wander off the main road.", free:true, time:"1–2h", mapQuery:"Brick Lane street art"},
];

// ---- configuration / derived data ----
const TAGS = [
  {key:"unusual", label:"Unusual", hint:"weird/hidden energy"},
  {key:"historic", label:"History", hint:"past + stories"},
  {key:"views", label:"Views", hint:"skyline moments"},
  {key:"foodie", label:"Food", hint:"eat-first planning"},
  {key:"walk", label:"Walkable", hint:"great on foot"},
  {key:"indoor", label:"Indoor", hint:"rain-proof"},
  {key:"photos", label:"Photo Spots", hint:"camera candy"}
];

const LS = {
  favs: "londonExplorer.favs.v1",
  itin: "londonExplorer.itin.v1"
};

const els = {
  q: document.getElementById("q"),
  neighborhood: document.getElementById("neighborhood"),
  kind: document.getElementById("kind"),
  sort: document.getElementById("sort"),
  chips: document.getElementById("chips"),
  cards: document.getElementById("cards"),
  count: document.getElementById("count"),
  toggleFavs: document.getElementById("toggleFavs"),
  clearFilters: document.getElementById("clearFilters"),
  itin: document.getElementById("itin"),
  itinMeta: document.getElementById("itinMeta"),
  clearItin: document.getElementById("clearItin"),
  exportItin: document.getElementById("exportItin")
};

let state = {
  tag: "",
  onlyFavs: false,
  favs: new Set(loadJson(LS.favs, [])),
  itin: loadJson(LS.itin, []) // array of ids
};

function loadJson(key, fallback){
  try{
    const raw = localStorage.getItem(key);
    return raw ? JSON.parse(raw) : fallback;
  }catch{ return fallback; }
}
function save(){
  localStorage.setItem(LS.favs, JSON.stringify([...state.favs]));
  localStorage.setItem(LS.itin, JSON.stringify(state.itin));
}
function uniq(arr){ return [...new Set(arr)].filter(Boolean).sort((a,b)=>a.localeCompare(b)); }

// ---- init dropdowns ----
function initFilters(){
  const areas = uniq(PLACES.map(p=>p.area));
  const kinds = uniq(PLACES.map(p=>p.kind));

  for(const a of areas){
    const opt = document.createElement("option");
    opt.value = a; opt.textContent = a;
    els.neighborhood.appendChild(opt);
  }
  for(const k of kinds){
    const opt = document.createElement("option");
    opt.value = k; opt.textContent = k;
    els.kind.appendChild(opt);
  }
}

// ---- chips ----
function initChips(){
  TAGS.forEach(t=>{
    const el = document.createElement("div");
    el.className = "chip";
    el.dataset.key = t.key;
    el.innerHTML = `<span>${t.label}</span> <small>${t.hint}</small>`;
    el.addEventListener("click", ()=>{
      state.tag = (state.tag === t.key) ? "" : t.key;
      render();
    });
    els.chips.appendChild(el);
  });
}

// ---- filtering logic ----
function matches(place){
  const q = els.q.value.trim().toLowerCase();
  const area = els.neighborhood.value;
  const kind = els.kind.value;

  if(area && place.area !== area) return false;
  if(kind && place.kind !== kind) return false;

  if(state.onlyFavs && !state.favs.has(place.id)) return false;

  if(state.tag){
    const tags = (place.tags || []).map(x=>String(x).toLowerCase());
    // A few tags are semantic
    if(state.tag === "unusual"){
      const unusualWords = ["oddities","quirky","scavenger-hunt","neon","underground","weird"];
      if(!tags.some(t=>unusualWords.includes(t))) return false;
    } else if(state.tag === "historic"){
      const histWords = ["historic","roman","ancient","history","victorian","ruins"];
      if(!tags.some(t=>histWords.includes(t))) return false;
    } else if(state.tag === "views"){
      if(!tags.includes("views")) return false;
    } else if(state.tag === "foodie"){
      const foodWords = ["foodie","street-food","tea","market"];
      if(!tags.some(t=>foodWords.includes(t))) return false;
    } else if(state.tag === "walk"){
      if(!tags.includes("walk") && place.kind !== "Walks") return false;
    } else if(state.tag === "indoor"){
      if(!tags.includes("indoor") && place.kind !== "Museums & Collections" && place.kind !== "Games & Experiences") return false;
    } else if(state.tag === "photos"){
      if(!tags.includes("photos")) return false;
    }
  }

  if(q){
    const hay = `${place.name} ${place.area} ${place.kind} ${(place.tags||[]).join(" ")} ${place.blurb}`.toLowerCase();
    if(!hay.includes(q)) return false;
  }
  return true;
}

function sortPlaces(list){
  const mode = els.sort.value;
  const copy = [...list];
  if(mode === "name"){
    copy.sort((a,b)=>a.name.localeCompare(b.name));
  } else if(mode === "free"){
    const scoreFree = v => (v === true ? 0 : (v === "unknown" ? 1 : 2));
    copy.sort((a,b)=> scoreFree(a.free)-scoreFree(b.free) || a.name.localeCompare(b.name));
  } else {
    // recommended: favorites first, then quicker wins, then name
    const favScore = p => state.favs.has(p.id) ? 0 : 1;
    const timeScore = p => (p.time==="Quick"?0:(p.time==="1–2h"?1:2));
    copy.sort((a,b)=> favScore(a)-favScore(b) || timeScore(a)-timeScore(b) || a.name.localeCompare(b.name));
  }
  return copy;
}

// ---- rendering ----
function render(){
  // chips active state
  [...els.chips.children].forEach(ch=>{
    ch.classList.toggle("active", ch.dataset.key === state.tag);
  });
  els.toggleFavs.classList.toggle("primary", state.onlyFavs);

  const filtered = sortPlaces(PLACES.filter(matches));
  els.count.textContent = `${filtered.length} place${filtered.length===1?"":"s"} shown`;

  els.cards.innerHTML = "";
  if(filtered.length === 0){
    const div = document.createElement("div");
    div.className = "empty";
    div.textContent = "No matches. Try clearing filters or searching a broader keyword.";
    els.cards.appendChild(div);
  } else {
    filtered.forEach(p=> els.cards.appendChild(placeCard(p)));
  }

  renderItinerary();
  save();
}

function badge(text, cls){
  const b = document.createElement("span");
  b.className = `badge ${cls||""}`.trim();
  b.textContent = text;
  return b;
}

function placeCard(p){
  const card = document.createElement("div");
  card.className = "card";

  const top = document.createElement("div");
  top.className = "cardTop";

  const left = document.createElement("div");
  const h = document.createElement("h3");
  h.textContent = p.name;

  const desc = document.createElement("p");
  desc.textContent = p.blurb;

  const badges = document.createElement("div");
  badges.className = "badges";
  badges.appendChild(badge(p.area, "kind"));
  badges.appendChild(badge(p.kind, "kind"));

  const freeLabel = p.free === true ? "Free" : (p.free === false ? "Paid" : "Cost varies");
  badges.appendChild(badge(freeLabel, p.free === true ? "good" : (p.free === false ? "warn" : "")));
  badges.appendChild(badge(p.time || "—", ""));

  left.appendChild(h);
  left.appendChild(desc);
  left.appendChild(badges);

  const fav = document.createElement("div");
  fav.className = "fav";
  fav.title = "Favorite";
  fav.innerHTML = state.favs.has(p.id) ? "★" : "☆";
  fav.classList.toggle("active", state.favs.has(p.id));
  fav.addEventListener("click", ()=>{
    if(state.favs.has(p.id)) state.favs.delete(p.id);
    else state.favs.add(p.id);
    render();
  });

  top.appendChild(left);
  top.appendChild(fav);

  const bot = document.createElement("div");
  bot.className = "cardBot";

  const actions = document.createElement("div");
  actions.className = "actions";

  const mapUrl = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(p.mapQuery || (p.name + ", London"))}`;
  const map = document.createElement("a");
  map.className = "link";
  map.href = mapUrl;
  map.target = "_blank";
  map.rel = "noopener";
  map.textContent = "Map";

  const add = document.createElement("button");
  add.className = "btn";
  add.textContent = state.itin.includes(p.id) ? "✓ In itinerary" : "+ Add";
  add.disabled = state.itin.includes(p.id);
  add.addEventListener("click", ()=>{
    if(!state.itin.includes(p.id)){
      state.itin.push(p.id);
      render();
    }
  });

  actions.appendChild(map);
  actions.appendChild(add);

  const rightNote = document.createElement("div");
  rightNote.className = "count";
  rightNote.textContent = (p.tags && p.tags.length) ? `Tags: ${p.tags.slice(0,3).join(", ")}` : "";

  bot.appendChild(actions);
  bot.appendChild(rightNote);

  card.appendChild(top);
  card.appendChild(bot);
  return card;
}

function renderItinerary(){
  els.itin.innerHTML = "";
  const items = state.itin.map(id => PLACES.find(p=>p.id===id)).filter(Boolean);

  els.itinMeta.textContent = `${items.length} saved`;

  if(items.length === 0){
    const div = document.createElement("div");
    div.className = "empty";
    div.textContent = "Add places from the cards to build your shortlist.";
    els.itin.appendChild(div);
    return;
  }

  items.forEach(p=>{
    const row = document.createElement("div");
    row.className = "item";

    const left = document.createElement("div");
    const b = document.createElement("b");
    b.textContent = p.name;
    const s = document.createElement("span");
    s.textContent = `${p.area} • ${p.kind}`;
    left.appendChild(b);
    left.appendChild(s);

    const x = document.createElement("div");
    x.className = "x";
    x.title = "Remove";
    x.textContent = "×";
    x.addEventListener("click", ()=>{
      state.itin = state.itin.filter(id => id !== p.id);
      render();
    });

    row.appendChild(left);
    row.appendChild(x);
    els.itin.appendChild(row);
  });
}

// ---- events ----
els.q.addEventListener("input", render);
els.neighborhood.addEventListener("change", render);
els.kind.addEventListener("change", render);
els.sort.addEventListener("change", render);

els.toggleFavs.addEventListener("click", ()=>{
  state.onlyFavs = !state.onlyFavs;
  render();
});

els.clearFilters.addEventListener("click", ()=>{
  els.q.value = "";
  els.neighborhood.value = "";
  els.kind.value = "";
  els.sort.value = "recommended";
  state.tag = "";
  state.onlyFavs = false;
  render();
});

els.clearItin.addEventListener("click", ()=>{
  state.itin = [];
  render();
});

els.exportItin.addEventListener("click", ()=>{
  const items = state.itin.map(id => PLACES.find(p=>p.id===id)).filter(Boolean);
  const payload = {
    exportedAt: new Date().toISOString(),
    city: "London",
    count: items.length,
    itinerary: items
  };
  const blob = new Blob([JSON.stringify(payload, null, 2)], {type:"application/json"});
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = "london-itinerary.json";
  document.body.appendChild(a);
  a.click();
  a.remove();
  URL.revokeObjectURL(url);
});

// keyboard shortcuts
document.addEventListener("keydown", (e)=>{
  if(e.key === "/" && document.activeElement !== els.q){
    e.preventDefault();
    els.q.focus();
  }
  if(e.key.toLowerCase() === "f" && document.activeElement !== els.q){
    state.onlyFavs = !state.onlyFavs;
    render();
  }
});

// init
initFilters();
initChips();
render();
</script>
</body>
</html>
